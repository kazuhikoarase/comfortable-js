{"version":3,"sources":["src/main/ts/core/_intf.ts","src/main/ts/core/_node.ts","src/main/ts/core/DefaultCellRendererFactory.ts","src/main/ts/core/EventTarget.ts","src/main/ts/core/DefaultTableModel.ts","src/main/ts/core/i18n.ts","src/main/ts/core/i18n/en.ts","src/main/ts/core/i18n/ja.ts","src/main/ts/core/UIEventTarget.ts","src/main/ts/core/InternalTable.ts","src/main/ts/core/List.ts","src/main/ts/core/style.ts","src/main/ts/core/Table.ts","src/main/ts/core/ui.ts","src/main/ts/core/util.ts","src/main/ts/template-support/_intf.ts","src/main/ts/template-support/DefaultHeaderCellRendererFactory.ts","src/main/ts/template-support/TemplateSupport.ts","src/main/ts/vue-support/VueSupport.ts"],"names":[],"mappings":"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","file":"comfortable.js","sourcesContent":["/*!\n * comfortable\n *\n * Copyright (c) 2018 Kazuhiko Arase\n *\n * URL: https://github.com/kazuhikoarase/comfortable-js/\n *\n * Licensed under the MIT license:\n *  http://www.opensource.org/licenses/mit-license.php\n */\n\nnamespace comfortable {\n\n  'use strict';\n\n  export interface Editor {\n    endEdit : () => void;\n  }\n\n  export interface Table extends UIEventTarget {\n    $el : HTMLElement;\n    model : TableModel;\n    editor : Editor;\n    getLockTop : () => number;\n    getLockLeft : () => number;\n    getLockBottom : () => number;\n    getLockRight : () => number;\n    forEachCells : (callback : (cell : {\n      $el : HTMLElement, row : number, col : number }) => void) => void;\n  }\n\n  export interface TableCellRenderer {\n    render : (cell : any) => void;\n    beginEdit : (cell : any) => {\n      focus() : void;\n      endEdit : () => ({ newValue : any; oldValue? : any; } | void);\n    };\n    dispose : () => void;\n  }\n\n  export interface TdWrapper {\n    $el : HTMLElement;\n    tableModel : TableModel; \n  }\n\n  export type TableCellRendererFactory =\n    (td : TdWrapper) => TableCellRenderer;\n\n  export interface TableCellStyle {\n    rowSpan? : number;\n    colSpan? : number;\n    editable? : boolean;\n    fontWeight? : string;\n    className? : string;\n    textAlign? : string;\n    verticalAlign? : string;\n    color? : string;\n    backgroundColor? : string;\n    borderLeft? : string;\n    borderTop? : string;\n    borderRight? : string;\n    borderBottom? : string;\n    labelFunction? : (value : any, cell : EditorCell) => string;\n  }\n\n  export interface TableCell extends TableCellStyle {\n    row : number;\n    col : number;\n    value : any;\n  }\n\n  export interface TableModel extends EventTarget {\n    defaultCellWidth : number;\n    defaultCellHeight : number;\n    defaultCellStyle : TableCellStyle;\n    defaultCellRendererFactory : TableCellRendererFactory;\n    maxRowSpan : number;\n    maxColSpan : number;\n    minCellWidth : number;\n    getRowCount : () => number;\n    getColumnCount : () => number;\n    getLineRowAt : (row : number) => any;\n    getLineRowCountAt : (row : number) => number;\n    getValueAt : (row : number, col : number) => any;\n    getCellStyleAt : (row : number, col : number) => TableCellStyle;\n    getCellRendererFactoryAt : (row : number, col : number) => TableCellRendererFactory;\n    getCellWidthAt : (col : number) => number;\n    getCellHeightAt : (row : number) => number;\n    getCellAt : (row : number, col : number) => TableCell;\n    checkSpaned : (row : number, col : number) => { row : number, col : number };\n    isColumnResizableAt : (col : number) => boolean;\n    isColumnDraggableAt : (col : number) => boolean;\n  }\n\n  export interface TextEditorOptions {\n    dataType : string;\n    decimalDigits? : number;\n  }\n  export interface TextEditorCell extends TableCell {\n    maxLength? : number;\n  }\n\n  export interface CheckBoxOptions {\n  }\n  export interface CheckBoxCell extends TableCell {\n    booleanValues : any[];\n  }\n\n  export interface SelectBoxOptions {\n  }\n\n  export interface SelectBoxCell extends TableCell {\n    valueField? : string;\n    labelField? : string;\n    options? : any[] | ( (row : number,col : number) => any[]);\n  }\n\n  export interface CellRendererFactoryOpts {\n    labelFunction? : (value : any, cell : EditorCell) => string;\n    createEditor? : () => CellEditor;\n    renderIsEditor? : boolean;\n    dataType? : string;\n  }\n\n  export type EditorCell = TextEditorCell|CheckBoxCell|SelectBoxCell;\n\n  export interface CellEditor {\n    $el : HTMLElement;\n    beginEdit : (td : TdWrapper, cell : EditorCell) => void;\n    focus : () => void;\n    blur : () => void;\n    setValue : (value : any) => void;\n    getValue : () => any;\n    isValid : () => boolean;\n  }\n\n}","/*!\n * comfortable\n *\n * Copyright (c) 2018 Kazuhiko Arase\n *\n * URL: https://github.com/kazuhikoarase/comfortable-js/\n *\n * Licensed under the MIT license:\n *  http://www.opensource.org/licenses/mit-license.php\n */\n\nnamespace comfortable {\n\n  'use strict';\n\n  // export\n  declare var exports : any, module : any;\n  if (typeof exports === 'object') {\n    module.exports = comfortable;\n  }\n\n}\n","/*!\n * comfortable\n *\n * Copyright (c) 2018 Kazuhiko Arase\n *\n * URL: https://github.com/kazuhikoarase/comfortable-js/\n *\n * Licensed under the MIT license:\n *  http://www.opensource.org/licenses/mit-license.php\n */\n\nnamespace comfortable {\n\n  'use strict';\n\n  class TextEditor implements CellEditor {\n\n    private opts : TextEditorOptions;\n    private valueType : string;\n\n    constructor(opts : TextEditorOptions) {\n      this.opts = opts;\n    }\n\n    public $el = util.createElement('input', {\n      attrs : { type : 'text', 'class' : '${prefix}-editor' }\n    });\n\n    private _$el = <HTMLInputElement>this.$el;\n\n    public beginEdit(td : TdWrapper, cell : TextEditorCell) {\n      var cs = window.getComputedStyle(td.$el, null);\n      var opts : ElementOptions = {\n          props : {},\n          style : {\n            textAlign : cs.textAlign,\n            verticalAlign : cs.verticalAlign,\n            color : cs.color,\n            backgroundColor : cs.backgroundColor,\n            fontFamily : cs.fontFamily,\n            fontSize : cs.fontSize,\n            fontWeight : cs.fontWeight\n          }\n        };\n      if (typeof cell.maxLength == 'number') {\n        (<any>opts.props).maxLength = cell.maxLength;\n      }\n      util.set(this.$el, opts);\n    }\n    public focus() {\n      this.$el.focus();\n      this._$el.select();\n    }\n    public blur() {\n      this.$el.blur();\n    }\n    public setValue(value : any) {\n      this._$el.value = value;\n      this.valueType = typeof value;\n    }\n    public getValue() {\n      if (this.opts.dataType == 'number') {\n        var value = util.formatNumber(\n            util.toNarrowNumber(this._$el.value),\n            this.opts.decimalDigits, '');\n        return this.valueType == 'number'? +value : value;\n      }\n      return this._$el.value;\n    }\n    public isValid() {\n      if (this.opts.dataType == 'number') {\n        return !!util.toNarrowNumber(\n          <string>this.getValue() ).match(util.numRe);\n      }\n      return true;\n    }\n  }\n\n  class CheckBox implements CellEditor {\n\n    private opts : CheckBoxOptions;\n    private booleanValues : any[] = null;\n\n    constructor(opts : CheckBoxOptions) {\n      this.opts = opts;\n    }\n\n    public $el = util.createElement('input', {\n      attrs : { type : 'checkbox', 'class' : '${prefix}-editor' }\n    });\n\n    private _$el = <HTMLInputElement>this.$el;\n\n    public beginEdit(td : TdWrapper, cell : CheckBoxCell) {\n      var cs = window.getComputedStyle(td.$el, null);\n      util.set(this.$el, {\n        style : {\n        }\n      });\n      this.booleanValues = cell.booleanValues || [false, true];\n    }\n    public focus() {\n      this.$el.focus();\n    }\n    public blur() {\n      this.$el.blur();\n    }\n    public setValue(value : any) {\n      this._$el.checked = (value === this.booleanValues[1]);\n    }\n    public getValue() {\n      return this.booleanValues[this._$el.checked? 1 : 0];\n    }\n    public isValid() {\n      return true;\n    }\n  }\n\n  class SelectBox implements CellEditor {\n\n    private opts : SelectBoxOptions;\n\n    constructor(opts : SelectBoxOptions) {\n      this.opts = opts;\n    }\n\n    public $el = util.createElement('select', {\n      attrs : { 'class' : '${prefix}-editor' }\n    });\n\n    private _$el = <HTMLSelectElement>this.$el;\n\n    public beginEdit(td : TdWrapper, cell : SelectBoxCell) {\n      var cs = window.getComputedStyle(td.$el, null);\n      util.set(this.$el, {\n        style : {\n          textAlign : cs.textAlign,\n          verticalAlign : cs.verticalAlign,\n          color : cs.color,\n          backgroundColor : cs.backgroundColor,\n          fontFamily : cs.fontFamily,\n          fontSize : cs.fontSize,\n          fontWeight : cs.fontWeight\n        }\n      });\n      var options = SelectBox.getOptions(cell);\n      while (this.$el.childNodes.length < options.length) {\n        this.$el.appendChild(util.createElement('option') );\n      }\n      var labelField = cell.labelField || 'label';\n      var valueField = cell.valueField || 'value';\n      var i = 0;\n      for (; i < options.length; i += 1) {\n        var option = options[i];\n        util.set(this.$el.childNodes[i], {\n          style : { display : '' },\n          props : { textContent : option[labelField],\n            value : option[valueField] }\n        });\n      }\n      while (this.$el.childNodes.length > options.length) {\n        this.$el.removeChild(this.$el.lastChild);\n      }\n      // IE9 does not support style.display=none.\n      /*\n      for (;i < select.childNodes.length; i += 1) {\n        select.childNodes[i].style.display = 'none';\n      }\n      */\n    }\n    public focus() {\n      this.$el.focus();\n    }\n    public blur() {\n      this.$el.blur();\n    }\n    public setValue(value : any) {\n      this._$el.value = value;\n    }\n    public getValue() {\n      return this._$el.value;\n    }\n    public isValid() {\n      return true;\n    }\n\n    public static getOptions(cell : SelectBoxCell) : any[] {\n      var options : any = cell.options;\n      if (typeof options == 'function') {\n        options = options(cell.row, cell.col);\n      }\n      return options || [];\n    }\n  }\n\n  export var createDefaultCellRendererFactoryOpts =\n      function() : CellRendererFactoryOpts {\n    return {\n      // value to label\n      labelFunction : function(value, cell) {\n\n        if (typeof cell.labelFunction == 'function') {\n\n          return cell.labelFunction(value, cell);\n\n        } else if (value === null || typeof value == 'undefined') {\n\n          return '';\n\n        } else if (this.dataType == 'number') {\n\n          return util.formatNumber(value, this.decimalDigits);\n\n        } else if (this.dataType == 'select-one') {\n\n          var options = SelectBox.getOptions(cell);\n          if (typeof options.splice != 'function') {\n            // not an Array.\n            return options[value] || '';\n          }\n\n          var labelField = (<SelectBoxCell>cell).labelField || 'label';\n          var valueField = (<SelectBoxCell>cell).valueField || 'value';\n          for (var i = 0; i < options.length; i += 1) {\n            var option = options[i];\n            if (option[valueField] == value) {\n              return option[labelField];\n            }\n          }\n          return '';\n \n        } else {\n\n          // by default, to string.\n          return '' + value;\n\n        }\n      },\n      // create an editor\n      createEditor : function() {\n        if (this.dataType == 'select-one') {\n          return new SelectBox(this);\n        } else if (this.dataType == 'boolean') {\n          return new CheckBox(this);\n        }\n        return new TextEditor(this);\n      }\n    };\n  };\n\n  export var createDefaultCellRendererFactory =\n      function(opts? : CellRendererFactoryOpts) :\n        TableCellRendererFactory {\n\n    opts = util.extend(createDefaultCellRendererFactoryOpts(), opts || {});\n\n    return function(td : TdWrapper) : TableCellRenderer {\n\n      var labelRenderer = createMultiLineLabelRenderer(td.$el);\n      var editor : CellEditor = null;\n      var oldValue : any = null;\n\n      var beginEdit = function(cell : EditorCell) {\n        if (editor == null) {\n          editor = opts.createEditor();\n          td.$el.appendChild(editor.$el);\n        }\n        labelRenderer.setVisible(false);\n        editor.beginEdit(td, cell);\n        editor.$el.style.display = '';\n        editor.setValue(oldValue = cell.value);\n      };\n\n      var renderIsEditor = opts.renderIsEditor;\n      if (typeof renderIsEditor == 'undefined') {\n        renderIsEditor = opts.dataType == 'boolean' ||\n          opts.dataType == 'select-one';\n      }\n\n      var editing = false;\n\n      return {\n        render : function(cell) {\n          if (!renderIsEditor) {\n            labelRenderer.setLabel(opts.labelFunction(cell.value, cell) );\n            if (opts.dataType == 'number') {\n              td.$el.style.textAlign = 'right';\n            }\n          } else {\n            // render is editor.\n            if (!editing) {\n              beginEdit(cell);\n            }\n          }\n        },\n        beginEdit : function(cell) {\n          editing = true;\n          beginEdit(cell);\n          return {\n            focus : function() {\n              editor.focus();\n            },\n            endEdit : function() {\n              editing =false;\n              if (!renderIsEditor) {\n                labelRenderer.setVisible(true);\n                editor.$el.style.display = 'none';\n              } else {\n                editor.blur();\n              }\n              return { oldValue : oldValue,\n                newValue : editor.isValid()? editor.getValue() : oldValue };\n            }\n          };\n        },\n        dispose : function() {\n        }\n      };\n    };\n  };\n\n  var linesRe = /\\r?\\n/g;\n\n  export var createMultiLineLabelRenderer = function(parent : HTMLElement) {\n    var elms : HTMLElement[] = null;\n    return {\n      setLabel : function(label : string) {\n        if (elms == null) {\n          elms = [ document.createElement('span') ];\n          parent.appendChild(elms[0]);\n        }\n        var lines = label.split(linesRe);\n        elms[0].textContent = lines[0];\n        var elmIndex = 1;\n        for (var i = 1; i < lines.length; i += 1) {\n          if (elmIndex + 1 >= elms.length) {\n            elms.push(document.createElement('br') );\n            elms.push(document.createElement('span') );\n            parent.appendChild(elms[elmIndex]);\n            parent.appendChild(elms[elmIndex + 1]);\n          }\n          elms[elmIndex].style.display = '';\n          elms[elmIndex + 1].style.display = '';\n          elms[elmIndex + 1].textContent = lines[i];\n          elmIndex += 2;\n        }\n        for (; elmIndex < elms.length; elmIndex += 1) {\n          elms[elmIndex].style.display = 'none';\n        }\n      },\n      setVisible : function(visible : boolean) {\n        if (elms != null) {\n          for (var i = 0; i < elms.length; i += 1) {\n            elms[i].style.display = visible? '' : 'none';\n          }\n        }\n      }\n    };\n  }\n\n}\n","/*!\n * comfortable\n *\n * Copyright (c) 2018 Kazuhiko Arase\n *\n * URL: https://github.com/kazuhikoarase/comfortable-js/\n *\n * Licensed under the MIT license:\n *  http://www.opensource.org/licenses/mit-license.php\n */\n\nnamespace comfortable {\n\n  'use strict';\n\n  export interface Event {\n    type : string;\n    target? : any;\n    currentTarget? : any;\n    preventDefault? : () => void;\n    which? : number;\n    defaultPrevented? : boolean;\n    pageX? : number;\n    pageY? : number;\n  }\n\n  export type EventListener = (event : Event, detail? : any) => void;\n\n  export interface EventTarget {\n    trigger : (type : string, detail? : any) => EventTarget;\n    on : (type : string, listener : EventListener) => EventTarget;\n    off : (type : string, listener : EventListener) => EventTarget;\n  }\n\n  /**\n   * @internal\n   */\n  export class EventTargetImpl implements EventTarget {\n    private map : { [ type : string ] : EventListener[] } = {};\n    private listeners(type : string) : EventListener[] {\n       return this.map[type] || (this.map[type] = []);\n    }\n    public trigger(type : string, detail? : any) {\n      var ctx = this;\n      (this.listeners(type)).forEach(function(listener : EventListener) {\n        listener.call(ctx, { type : type }, detail);\n      });\n      return this;\n    }\n    public on(type : string, listener : EventListener) {\n      this.listeners(type).push(listener);\n      return this;\n    }\n    public off(type : string, listener : EventListener) {\n      this.map[type] = this.listeners(type).filter(function(l : EventListener) {\n        return listener != l;\n      });\n      return this;\n    }\n  }\n\n}\n","/*!\n * comfortable\n *\n * Copyright (c) 2018 Kazuhiko Arase\n *\n * URL: https://github.com/kazuhikoarase/comfortable-js/\n *\n * Licensed under the MIT license:\n *  http://www.opensource.org/licenses/mit-license.php\n */\n\n/// <reference path=\"EventTarget.ts\" />\n\nnamespace comfortable {\n\n  'use strict';\n\n  /**\n   * @internal\n   */\n  export class DefaultTableModel extends EventTargetImpl implements TableModel {\n    public defaultCellWidth = 100;\n    public defaultCellHeight = 28;\n    public defaultCellStyle = { rowSpan : 1, colSpan : 1, editable : true };\n    public defaultCellRendererFactory = createDefaultCellRendererFactory();\n    public maxRowSpan = 8;\n    public maxColSpan = 8;\n    public minCellWidth = 8;\n    public getRowCount() { return 1E5; }\n    public getColumnCount() { return 1E5; }\n    public getLineRowAt(row : number) { return row; }\n    public getLineRowCountAt(row : number) { return this.getRowCount(); }\n    public getValueAt(row : number, col : number) { return row + ',' + col; }\n    public getCellStyleAt(row : number, col : number) { return {}; }\n    public getCellRendererFactoryAt(row : number, col : number) { return this.defaultCellRendererFactory; }\n    public getCellWidthAt(col : number) { return this.defaultCellWidth; }\n    public getCellHeightAt(row : number) { return this.defaultCellHeight; }\n    public getCellAt(row : number, col : number) {\n      return util.extend({\n          row : row, col : col, value : this.getValueAt(row, col) },\n          this.defaultCellStyle, this.getCellStyleAt(row, col) );\n    }\n    public checkSpaned(row : number, col : number) {\n      var minRow = Math.max(0, row - this.maxRowSpan);\n      var minCol = Math.max(0, col - this.maxColSpan);\n      for (var r = row; r >= minRow; r -= 1) {\n        for (var c = col; c >= minCol; c -= 1) {\n          if (r != row || c != col) {\n            var cell = this.getCellAt(r, c);\n            if (row < r + cell.rowSpan && col < c + cell.colSpan) {\n              return { row : r, col : c };\n            }\n          }\n        }\n      }\n      return null;\n    }\n    public isColumnResizableAt(col : number) { return true; }\n    public isColumnDraggableAt(col : number) { return true; }\n  }\n\n}\n","/*!\n * comfortable\n *\n * Copyright (c) 2018 Kazuhiko Arase\n *\n * URL: https://github.com/kazuhikoarase/comfortable-js/\n *\n * Licensed under the MIT license:\n *  http://www.opensource.org/licenses/mit-license.php\n */\n\nnamespace comfortable.i18n {\n\n  'use strict';\n\n  export interface I18N {\n    messages : Messages\n  }\n\n  export interface Messages {\n    RESET_FILTER : string;\n    EDIT_COLUMNS : string;\n    SORT_ASC : string;\n    SORT_DESC : string;\n    APPLY : string;\n    OK : string;\n    CANCEL : string;\n    RESET : string;\n    LOCK_COLUMN : string;\n    SELECT_BLANK : string;\n    SELECT_ALL : string;\n  }\n\n  export var getInstance = function(lang : string) {\n    lang = lang || navigator.language || (<any>navigator).userLanguage;\n    var _i18n : any = i18n;\n    return <I18N>(util.extend({}, _i18n.en, _i18n[lang] ||\n        _i18n[lang.replace(/\\-\\w+$/, '')] || {}) );\n  }\n\n  export var getMessages = function() : Messages {\n    return util.extend(\n        this.getInstance('en').messages,\n        this.getInstance().messages);\n  }\n\n}\n","/*!\n * comfortable\n *\n * Copyright (c) 2018 Kazuhiko Arase\n *\n * URL: https://github.com/kazuhikoarase/comfortable-js/\n *\n * Licensed under the MIT license:\n *  http://www.opensource.org/licenses/mit-license.php\n */\n\nnamespace comfortable.i18n {\n\n  'use strict';\n\n  /**\n   * @internal\n   */\n  export var en : I18N = {\n    messages : {\n      RESET_FILTER : 'Clear Sort and Filters',\n      EDIT_COLUMNS : 'Column Visibility and Order',\n      SORT_ASC : 'Sort Ascending',\n      SORT_DESC : 'Sort Descending',\n      APPLY : 'Apply',\n      OK : 'OK',\n      CANCEL : 'Cancel',\n      RESET : 'Reset',\n      LOCK_COLUMN : '< Lock Column >',\n      SELECT_BLANK : '(Space)',\n      SELECT_ALL : '(Select All)'\n    }\n  };\n\n}\n","/*!\n * comfortable\n *\n * Copyright (c) 2018 Kazuhiko Arase\n *\n * URL: https://github.com/kazuhikoarase/comfortable-js/\n *\n * Licensed under the MIT license:\n *  http://www.opensource.org/licenses/mit-license.php\n */\n\nnamespace comfortable.i18n {\n\n  'use strict';\n\n  /**\n   * @internal\n   */\n  export var ja : I18N = {\n    messages : {\n      RESET_FILTER : '',\n      EDIT_COLUMNS : '',\n      SORT_ASC : '',\n      SORT_DESC : '',\n      APPLY : '',\n      OK : 'OK',\n      CANCEL : '',\n      RESET : '',\n      LOCK_COLUMN : '<  >',\n      SELECT_BLANK : '()',\n      SELECT_ALL : '()'\n    }\n  };\n\n}\n","/*!\n * comfortable\n *\n * Copyright (c) 2018 Kazuhiko Arase\n *\n * URL: https://github.com/kazuhikoarase/comfortable-js/\n *\n * Licensed under the MIT license:\n *  http://www.opensource.org/licenses/mit-license.php\n */\n\n/// <reference path=\"EventTarget.ts\" />\n\nnamespace comfortable {\n\n  'use strict';\n\n  export interface UIEventTarget extends EventTarget {\n    invalidate : () => void;\n    render : () => void;\n  }\n\n  /**\n   * @internal\n   */\n  export class UIEventTargetImpl\n  extends EventTargetImpl implements UIEventTarget {\n    public valid = true;\n    public invalidate() {\n      this.valid = false;\n      util.callLater(function() {\n        if (!this.valid) {\n          this.valid = true;\n          this.render();\n        }\n      }.bind(this) );\n    }\n    public render() {\n    }\n  }\n\n}\n","/*!\n * comfortable\n *\n * Copyright (c) 2018 Kazuhiko Arase\n *\n * URL: https://github.com/kazuhikoarase/comfortable-js/\n *\n * Licensed under the MIT license:\n *  http://www.opensource.org/licenses/mit-license.php\n */\n\n/// <reference path=\"UIEventTarget.ts\" />\n\nnamespace comfortable {\n\n  'use strict';\n\n  /**\n   * @internal\n   */\n  export interface ElmCache {\n    $el : HTMLElement;\n    tableModel? : TableModel; \n    row? : number;\n    col? : number;\n    children? : ElmCache[];\n    renderer? : TableCellRenderer;\n    factory? : TableCellRendererFactory;\n  }\n\n  /**\n   * @internal\n   */\n  export interface TableState {\n    left : number;\n    top : number;\n    width : number;\n    height : number;\n    minRow : number;\n    maxRow : number;\n    minCol : number;\n    maxCol : number;\n    indexById : { [id : string] : { trIndex : number, tdIndex : number} };\n  }\n\n  /**\n   * @internal\n   */\n  export interface OffsetCache {\n    left : { [i : number] : number };\n    top : { [i : number] : number };\n  }\n\n  /**\n   * @internal\n   */\n  export interface InternalTable {\n    $el : HTMLElement;\n    left : number;\n    top : number;\n    colgroup : ElmCache;\n    tbody : ElmCache;\n    row? : number;\n    col? : number;\n    model : TableModel;\n    tableState : TableState;\n    beforeCellSizeChangeHandler : EventListener;\n    offsetCache : OffsetCache;\n    calcCellPosition : (left : number, top : number) => {\n      left : number, top : number, row : number, col : number};\n    preRender : () => TableState;\n    render : () => void;\n  }\n\n  var createTableState = function() : TableState {\n    return {\n      left : 0, top : 0, width : 0, height : 0,\n      minRow : 0, maxRow : 0, minCol : 0, maxCol : 0,\n      indexById : {}\n    };\n  }\n\n  /**\n   * @internal\n   */\n  export class InternalTableImpl implements InternalTable {\n\n    private _colgroup = util.createElement('colgroup');\n    private _tbody = util.createElement('tbody');\n\n    private table = util.createElement('table', {\n        attrs : { cellspacing : '0' },\n        style : {\n          tableLayout : 'fixed', position : 'absolute', lineHeight : '1'\n        }\n      }, <HTMLElement[]>[ this._colgroup, this._tbody ]);\n    private view = util.createElement('div', {\n      style : { overflow : 'hidden', position : 'relative' },\n      on : { scroll : (event) => {\n         this.view.scrollLeft = 0;  this.view.scrollTop = 0; } }\n    }, [ this.table ]);\n\n    private getOrCrt(tagName : string, index : number,\n        parent : ElmCache, init? : (elm : ElmCache) => void ) {\n      if (parent.children && index < parent.children.length) {\n        return parent.children[index];\n      }\n      if (!parent.children) {\n        parent.children = [];\n      }\n      var elm : ElmCache = { $el : document.createElement(tagName) };\n      if (init) {\n        init(elm);\n      }\n      parent.$el.appendChild(elm.$el);\n      parent.children.push(elm);\n      return elm;\n    }\n\n    private getCellStyle(cell : TableCellStyle) : ElementOptions {\n      return {\n        attrs : { 'class' : cell.className },\n        style : {\n          textAlign : cell.textAlign,\n          verticalAlign : cell.verticalAlign,\n          color : cell.color,\n          backgroundColor : cell.backgroundColor,\n          fontWeight : cell.fontWeight,\n          borderLeft : cell.borderLeft,\n          borderRight : cell.borderRight,\n          borderTop : cell.borderTop,\n          borderBottom : cell.borderBottom\n        }\n      };\n    }\n    public $el = this.view;\n    public colgroup : ElmCache = { $el : this._colgroup };\n    public tbody : ElmCache = { $el : this._tbody };\n    public left = 0;\n    public top = 0;\n    public model : TableModel = null;\n    public tableState = createTableState();\n\n    public offsetCache : OffsetCache = null;\n    public beforeCellSizeChangeHandler : EventListener = null;\n    public calcCellPosition(left : number, top : number) {\n\n      var tableModel : TableModel = this.model;\n\n      // offset cache\n      if (this.beforeCellSizeChangeHandler == null) {\n        this.beforeCellSizeChangeHandler = (event : Event, detail : any) => {\n          // note: 'this' bind to inner-table's.\n          this.offsetCache = null;\n        };\n      }\n      tableModel.off('beforecellsizechange', this.beforeCellSizeChangeHandler);\n      tableModel.on('beforecellsizechange', this.beforeCellSizeChangeHandler);\n      this.offsetCache = this.offsetCache || { left : {}, top : {} };\n      var prec = 1000;\n      var offsetLeftCache : {[i : number] : number} = this.offsetCache.left;\n      var offsetTopCache : {[i : number] : number} = this.offsetCache.top;\n      var offsetLeft = 0;\n      var offsetTop = 0;\n\n      var rowCount = tableModel.getRowCount();\n      var columnCount = tableModel.getColumnCount();\n      var cellWidth = 0;\n      var cellHeight = 0;\n      var col = 0;\n      var row = 0;\n\n      var leftCache : { col : number, offset : number } = null;\n      var topCache : { row : number, offset : number } = null;\n      for (var i = 0; typeof offsetLeftCache[i] == 'number'; i += prec) {\n        if (left + offsetLeftCache[i] <= 0) {\n          leftCache = { col : i, offset : offsetLeftCache[i] };\n        }\n      }\n      for (var i = 0; typeof offsetTopCache[i] == 'number'; i += prec) {\n        if (top + offsetTopCache[i] <= 0) {\n          topCache = { row : i, offset : offsetTopCache[i] };\n        }\n      }\n      if (leftCache) {\n        col = leftCache.col;\n        left += leftCache.offset;\n        offsetLeft += leftCache.offset;\n      }\n      if (topCache) {\n        row = topCache.row;\n        top += topCache.offset;\n        offsetTop += topCache.offset;\n      }\n\n      for (; col < columnCount; col += 1,\n          left += cellWidth, offsetLeft += cellWidth) {\n        if (col % prec == 0) {\n          offsetLeftCache[col] = offsetLeft;\n        }\n        cellWidth = tableModel.getCellWidthAt(col);\n        if (left + cellWidth <= 0) {\n          continue;\n        }\n        break;\n      }\n      for (; row < rowCount; row += 1,\n          top += cellHeight, offsetTop += cellHeight) {\n        if (row % prec == 0) {\n          offsetTopCache[row] = offsetTop;\n        }\n        cellHeight = tableModel.getCellHeightAt(row);\n        if (top + cellHeight <= 0) {\n          continue;\n        }\n        break;\n      }\n      if (row < rowCount && col < columnCount) {\n        var spaned = tableModel.checkSpaned(row, col);\n        if (spaned) {\n          while (row > spaned.row) {\n            row -= 1;\n            top -= tableModel.getCellHeightAt(row);\n          }\n          while (col > spaned.col) {\n            col -= 1;\n            left -= tableModel.getCellWidthAt(col);\n          }\n        }\n      }\n      return { left : left, col : col, top : top, row : row };\n    }\n\n    public preRender() {\n\n      var width = this.$el.offsetWidth;\n      var height = this.$el.offsetHeight;\n      var rowCount = this.model.getRowCount();\n      var columnCount = this.model.getColumnCount();\n\n      var cellPos = this.calcCellPosition(this.left, this.top);\n\n      var tableState = createTableState();\n      tableState.top = cellPos.top;\n      tableState.minRow = cellPos.row;\n      tableState.left = cellPos.left;\n      tableState.minCol = cellPos.col;\n\n      var top = cellPos.top;\n      var row = cellPos.row;\n      var trIndex = 0;\n      while (row < rowCount && top < height) {\n        var cellHeight = this.model.getCellHeightAt(row);\n        this.getOrCrt('tr', trIndex, this.tbody).\n          $el.style.height = cellHeight + 'px';\n        tableState.height += cellHeight;\n        top += cellHeight;\n        row += 1;\n        trIndex += 1;\n      }\n      for (;trIndex < this._tbody.childNodes.length; trIndex += 1) {\n        (<HTMLElement>this._tbody.childNodes[trIndex]).style.height = '0px';\n      }\n      tableState.maxRow = Math.min(rowCount, tableState.minRow +\n          (this.tbody.children? this.tbody.children.length : 0) ) - 1;\n\n      var left = cellPos.left;\n      var col = cellPos.col;\n      var colIndex = 0;\n      while (col < columnCount && left < width) {\n        var cellWidth = this.model.getCellWidthAt(col);\n        this.getOrCrt('col', colIndex, this.colgroup).\n          $el.style.width = cellWidth + 'px';\n        tableState.width += cellWidth;\n        left += cellWidth;\n        col += 1;\n        colIndex += 1;\n      }\n      for (;colIndex < this._colgroup.childNodes.length; colIndex += 1) {\n        (<HTMLElement>this._colgroup.childNodes[colIndex]).style.width = '0px';\n      }\n      tableState.maxCol = Math.min(columnCount, tableState.minCol +\n          (this.colgroup.children? this.colgroup.children.length : 0) ) - 1;\n\n      return tableState;\n    }\n\n    public render() {\n\n      var tableState = this.preRender();\n      var spaned : { [id : string] : boolean } = {};\n\n      var setSpaned = function(row : number, col : number,\n          td : HTMLTableDataCellElement, cell : TableCellStyle) {\n        td.rowSpan = cell.rowSpan;\n        td.colSpan = cell.colSpan;\n        if (cell.rowSpan == 1 && cell.colSpan == 1) {\n          return;\n        }\n        for (var r = 0; r < cell.rowSpan; r += 1) {\n          for (var c = 0; c < cell.colSpan; c += 1) {\n            if (r != 0 || c != 0) {\n              var id = util.getCellId(row + r, col + c);\n              spaned[id] = true;\n            }\n          }\n        }\n      };\n\n      var tableModel : TableModel = this.model;\n      var initCell = function(td : ElmCache) {\n        td.renderer = null;\n        td.tableModel = tableModel;\n        td.$el.style.overflow = 'hidden';\n        td.$el.style.whiteSpace = 'nowrap';\n      };\n\n      for (var row = tableState.minRow; row <= tableState.maxRow; row += 1) {\n\n        var trIndex = row - tableState.minRow;\n        var tr = this.tbody.children[trIndex];\n\n        var tdIndex = 0;\n        for (var col = tableState.minCol; col <= tableState.maxCol; col += 1) {\n\n          var id = util.getCellId(row, col);\n          if (spaned[id]) {\n            continue;\n          }\n          tableState.indexById[id] = { trIndex : trIndex, tdIndex : tdIndex };\n\n          var td = this.getOrCrt('td', tdIndex, tr, initCell);\n          td.row = row;\n          td.col = col;\n\n          var cell = tableModel.getCellAt(row, col);\n          setSpaned(row, col, <HTMLTableDataCellElement>td.$el, cell);\n\n          var factory = tableModel.getCellRendererFactoryAt(row, col);\n          if (td.factory != factory) {\n            td.factory = factory;\n            if (td.renderer) {\n              td.renderer.dispose();\n            }\n            td.$el.innerHTML = '';\n            td.renderer = td.factory(<TdWrapper>td);\n          }\n\n          util.set(td.$el, this.getCellStyle(cell) );\n          td.renderer.render(cell);\n\n          tdIndex += 1;\n        }\n      }\n\n      util.extend(this.table.style, {\n        left : tableState.left + 'px',\n        top : tableState.top + 'px',\n        width : tableState.width + 'px',\n        height : tableState.height + 'px'\n      });\n\n      this.tableState = tableState;\n    }\n  }\n\n}\n","/*!\n * comfortable\n *\n * Copyright (c) 2018 Kazuhiko Arase\n *\n * URL: https://github.com/kazuhikoarase/comfortable-js/\n *\n * Licensed under the MIT license:\n *  http://www.opensource.org/licenses/mit-license.php\n */\n\n/// <reference path=\"UIEventTarget.ts\" />\n\nnamespace comfortable {\n\n  'use strict';\n\n  export interface List<T,C extends ListCell> extends UIEventTarget {\n    $el : HTMLElement;\n    getItemAt : (index : number) => T;\n    getItemCount : () => number;\n    createCell : () => C;\n    renderCell : (cell : C, item : T) => void;\n    cellHeight : number;\n  }\n\n  export interface ListCell {\n    $el : HTMLElement;\n    row : number;\n  }\n\n  /**\n   * @internal\n   */\n  export class ListImpl<T,C extends ListCell>\n  extends UIEventTargetImpl implements List<T,C> {\n\n    private listContent = util.createElement('div', {\n      style : { position : 'absolute' } });\n    private list = { $el :  util.createElement('div', {\n      style : { position : 'absolute',\n        overflow : 'hidden', whiteSpace:'nowrap' } }, [ this.listContent ]) };\n\n    private scr = util.createElement('div', {\n      style : { position : 'absolute' } });\n\n    private viewPane = util.createElement('div', {\n        style : { position : 'absolute',\n          overflowX : 'hidden', overflowY : 'auto' },\n        on : { scroll : (event) => { this.render(); } }\n      }, [this.scr]);\n  \n    private frame = util.createElement('div', {\n        style : { position : 'relative', overflow : 'hidden',\n          width : '100px', height : '100px' },\n        on : {\n          wheel : (event) => {\n            this.viewPane.scrollLeft += event.deltaX;\n            this.viewPane.scrollTop += event.deltaY;\n          }\n        } },[ this.viewPane, this.list.$el ]);\n\n    private cells : C[] = [];\n    private getOrCrt(index : number) {\n      if (index < this.cells.length) {\n        return this.cells[index];\n      }\n      var cell = this.createCell();\n      this.listContent.appendChild(cell.$el);\n      this.cells.push(cell);\n      return cell;\n    };\n\n    public $el = this.frame;\n    public getItemAt(index : number) : T { return <any>'item' + index; }\n    public getItemCount() { return 100000; }\n    public createCell() : C {\n      return <any>{ $el : util.createElement('div', {\n        props : { textContent : 'M' },\n        style : { borderBottom : '1px solid silver' }\n      }), row : -1 };\n    }\n    public renderCell(cell : C, item : T) {\n      cell.$el.textContent = <any>item;\n    }\n    public cellHeight = -1;\n    public render() {\n\n      util.set(this.viewPane, { style : {\n        left : '0px', top : '0px',\n        width : this.$el.offsetWidth + 'px',\n        height : this.$el.offsetHeight + 'px'\n      } });\n\n      if (this.cellHeight == -1) {\n        this.cellHeight = this.getOrCrt(0).$el.offsetHeight;\n      }\n      var viewHeight = this.cellHeight * this.getItemCount();\n      var scrHeight = Math.min(viewHeight, 1E6);\n\n      var listTop = -(scrHeight > this.viewPane.clientHeight?\n          util.translate(this.viewPane.scrollTop,\n          0, scrHeight - this.viewPane.clientHeight,\n          0, viewHeight - this.viewPane.clientHeight,\n          'list.top') : 0);\n\n      var minRow = Math.floor(-listTop / this.cellHeight);\n      var maxRow = Math.min(this.getItemCount() - 1,\n          Math.floor( (-listTop + this.viewPane.clientHeight) / this.cellHeight) );\n      var top = listTop + minRow * this.cellHeight;\n\n      util.set(this.listContent, { style : { left : '0px', top : top + 'px' } });\n\n      var cellIndex = 0;\n      for (var row = minRow; row <= maxRow; row += 1) {\n        var cell = this.getOrCrt(cellIndex);\n        cell.row = row;\n        cell.$el.style.display = '';\n        this.renderCell(cell, this.getItemAt(row) );\n        cellIndex += 1;\n      }\n      for (; cellIndex < this.cells.length; cellIndex += 1) {\n        this.cells[cellIndex].$el.style.display = 'none';\n      }\n\n      util.set(this.scr, { style : {\n        left : '0px', top : '0px',\n        width : this.$el.offsetWidth + 'px',\n        height : scrHeight + 'px'\n      } });\n\n      util.set(this.list.$el, { style : {\n        whiteSpace : 'nowrap',\n        width : this.viewPane.clientWidth + 'px',\n        height : this.viewPane.clientHeight + 'px'\n      } });\n\n      this.trigger('rendered', {\n        listState : { minRow : minRow, maxRow : maxRow } } );\n    }\n  }\n\n}\n","/*!\n * comfortable\n *\n * Copyright (c) 2018 Kazuhiko Arase\n *\n * URL: https://github.com/kazuhikoarase/comfortable-js/\n *\n * Licensed under the MIT license:\n *  http://www.opensource.org/licenses/mit-license.php\n */\n\nnamespace comfortable {\n\n  'use strict';\n\n  export var classNamePrefix = 'ctj';\n\n}\n","/*!\n * comfortable\n *\n * Copyright (c) 2018 Kazuhiko Arase\n *\n * URL: https://github.com/kazuhikoarase/comfortable-js/\n *\n * Licensed under the MIT license:\n *  http://www.opensource.org/licenses/mit-license.php\n */\n\n/// <reference path=\"UIEventTarget.ts\" />\n\nnamespace comfortable {\n\n  'use strict';\n\n  interface CellRect {\n    left : number;\n    top : number;\n    width : number;\n    height : number;\n  }\n\n  interface CellSizeCache {\n    viewWidth : number;\n    viewHeight : number;\n    rects : CellRect[];\n    rowCount : number;\n    columnCount :number;\n    lockTop : number;\n    lockLeft : number;\n    lockBottom : number;\n    lockRight : number;\n    width : number;\n    height : number;\n  }\n\n  interface RenderParams {\n    width : number;\n    height : number;\n    rects : CellRect[],\n    viewWidth : number;\n    viewHeight : number;\n    scrWidth : number;\n    scrHeight : number;\n  }\n\n  interface TargetColumn {\n    colFrom : number;\n    colTo : number;\n    i : number;\n    left : number;\n    distance : number;\n  }\n\n  interface ColResizeHandle {\n    $el : HTMLElement;\n    col? : number;\n    left? : number;\n  }\n\n  /**\n   * @internal\n   */\n  export interface InternalEditor extends Editor {\n    impl : any;\n    cell : { row : number, col : number };\n    beginEdit : (row : number, col : number, makeVisible? : boolean) => void;\n    endEdit : () => void;\n  }\n\n  /**\n   * @internal\n   */\n  export var tableEventTypes = [\n    'mousedown', 'mouseover', 'mouseout',\n    'click', 'dblclick', 'contextmenu' ];\n\n  export var createTable = function() : Table {\n    return new TableImpl(new DefaultTableModel() );\n  }\n\n  // Left-Top\n  var LT_INDEX = 0;\n  // Center-Middle\n  var CM_INDEX = 4;\n  // Right-Bottom\n  var RB_INDEX = 8;\n\n  /**\n   * @internal\n   */\n  export class TableImpl extends UIEventTargetImpl implements Table {\n\n    constructor(model : TableModel) {\n      super();\n      this.model = model;\n    }\n\n    private tables = ( () => {\n\n      var tables : InternalTable[] = [];\n      for (var i = 0; i < 9; i += 1) {\n        tables.push(new InternalTableImpl() );\n      }\n\n      tables.forEach( (table, i) => {\n        table.row = ~~(i / 3);\n        table.col = i % 3;\n        var cellEventHandler = function(handler :\n            (event : Event, td : ElmCache) => void) : EventListener {\n          return function(event) {\n            var col = util.indexOf(util.closest(event.target,\n                { tagName : 'TD', root : table.$el }) );\n            var row = util.indexOf(util.closest(event.target,\n                { tagName : 'TR', root : table.$el }) );\n            if (col != -1 && row != -1) {\n              handler(event, table.tbody.children[row].children[col]);\n            }\n          };\n        };\n        var delegateHandler = cellEventHandler( (event, td) => {\n          this.trigger(event.type,\n              { originalEvent : event, row : td.row, col : td.col }); });\n        var delegates : {[type : string] : EventListener} = {};\n        tableEventTypes.forEach(function(type) {\n          delegates[type] = delegateHandler;\n        });\n        util.set(table.$el, {\n          on : delegates\n        });\n        util.set(table.$el, {\n          style : { position : 'absolute' },\n          on : {\n            mousedown: cellEventHandler( (event, td) => {\n              if (event.which != 1) {\n                return;\n              }\n              if (td.row < this.getLockTop() &&\n                  this.model.isColumnDraggableAt(td.col) &&\n                  !event.defaultPrevented) {\n                event.preventDefault();\n                var mousemoveHandler = (event : Event) => {\n                  updateMarker(event.pageX - dragPoint.x);\n                };\n                var mouseupHandler = (event : Event) => {\n                  util.$(document).off('mousemove', mousemoveHandler).\n                    off('mouseup', mouseupHandler);\n                  this.frame.removeChild(dragProxy);\n                  this.frame.removeChild(marker);\n                  if (targetColumn != null) {\n                    tableModel.trigger('columndragged', {\n                      colFrom : targetColumn.colFrom,\n                      colSpan : cell.colSpan,\n                      colTo : targetColumn.colTo });\n                    this.invalidate();\n                  }\n                };\n                util.$(document).on('mousemove', mousemoveHandler).\n                  on('mouseup', mouseupHandler);\n                var getTargetColumn = (centerX : number) => {\n                  var targetColumn : TargetColumn = null;\n                  tables.forEach( (tbl, i) => {\n                    if (tbl.row == table.row) {\n                      var tableState = tbl.tableState;\n                      var rect = this.getCellSizeCache().rects[i];\n                      var left = rect.left + tableState.left;\n                      for (var col = tableState.minCol; col <= tableState.maxCol; col += 1) {\n                        var distance = Math.abs(left - centerX);\n                        if ( (targetColumn == null ||\n                                distance < targetColumn.distance) &&\n                              !tableModel.checkSpaned(0, col) ) {\n                          targetColumn = { colFrom : colFrom, colTo : col,\n                              i : i, left : left, distance : distance };\n                        }\n                        left += tableModel.getCellWidthAt(col);\n                      }\n                    }\n                  });\n                  return targetColumn;\n                };\n                var updateMarker = function(delta : number) {\n                  var left = getLeft(delta);\n                  targetColumn = getTargetColumn(left + colWidth / 2);\n                  dragProxy.style.left = left + 'px';\n                  marker.style.left = (targetColumn.left - markerStyle.gap - 1) + 'px';\n                };\n                var tableModel = this.model;\n                var tableState = table.tableState;\n                var targetColumn : TargetColumn = null;\n                var rect = this.getCellSizeCache().rects[i];\n                var colFrom = td.col;\n                var spaned = tableModel.checkSpaned(0, colFrom);\n                if (spaned) {\n                  colFrom = spaned.col;\n                }\n                var cell = tableModel.getCellAt(0, colFrom);\n                var colLeft = function() {\n                  var left = 0;\n                  for (var col = tableState.minCol; col < colFrom; col += 1) {\n                    left += tableModel.getCellWidthAt(col);\n                  }\n                  return left;\n                }();\n                var colWidth = function() {\n                  var width = 0;\n                  for (var col = 0; col < cell.colSpan; col += 1) {\n                    width += tableModel.getCellWidthAt(colFrom + col);\n                  }\n                  return width;\n                }();\n                var getLeft = function(delta : number) {\n                  return tableState.left + rect.left + colLeft + delta;\n                };\n                var dragPoint = { x : event.pageX, y : event.pageY };\n                var dragProxy = util.createElement('div', {\n                  attrs : { 'class' : '${prefix}-column-drag-proxy' },\n                  style : { position : 'absolute', top : '0px',\n                    width : colWidth + 'px',\n                    height : rect.height + 'px' }\n                });\n                var markerStyle = { gap : 2 };\n                var marker = util.createElement('div', {\n                  attrs : { 'class' : '${prefix}-column-drag-marker' },\n                  style : { position : 'absolute', top : '0px',\n                    width : (markerStyle.gap * 2 + 1) + 'px',\n                    height : rect.height + 'px' }\n                });\n                updateMarker(0);\n                this.frame.appendChild(dragProxy);\n                this.frame.appendChild(marker);\n                return;\n              }\n              // begin edit by logical row and col\n              if (this.editor.cell != null &&\n                  this.editor.cell.row == td.row &&\n                  this.editor.cell.col == td.col) {\n              } else if (this.isEditableAt(td.row, td.col) ) {\n                event.preventDefault();\n                this.editor.beginEdit(td.row, td.col, true);\n              }\n            })\n          }\n        } );\n      });\n\n      return tables;\n    })();\n\n    private barSize : { width : number, height : number } = null;\n    private measureBarSize() {\n      if (this.barSize == null) {\n\n        var scr = util.createElement('div', {\n          style : { position : 'absolute' } });\n  \n        var viewPane = util.createElement('div', {\n          style : { position : 'absolute', overflow : 'auto' },\n          on : { scroll : (event) => { this.render(); } }\n        }, [ scr ]);\n\n        util.extend(scr.style, {\n          width : '200px', height : '200px' });\n        util.extend(viewPane.style, {\n          left : '0px', top : '0px', width : '100px', height : '100px' });\n\n        this.frame.appendChild(viewPane);\n        this.barSize = {\n          width : viewPane.offsetWidth - viewPane.clientWidth,\n          height : viewPane.offsetHeight - viewPane.clientHeight\n        };\n        this.frame.removeChild(viewPane);\n      }\n      return this.barSize;\n    };\n\n    private hScr = util.createElement('div', {\n        style : { position : 'absolute' } });\n\n    private hViewPane = util.createElement('div', {\n        style : { position : 'absolute',\n          overflowX : 'auto', overflowY : 'hidden' },\n        on : { scroll : (event) => { this.render(); } }\n      }, [ this.hScr ]);\n\n    private vScr = util.createElement('div', {\n        style : { position : 'absolute' } });\n\n    private vViewPane = util.createElement('div', {\n        style : { position : 'absolute',\n          overflowX : 'hidden', overflowY : 'auto' },\n        on : { scroll : (event) => { this.render(); } }\n      }, [ this.vScr ]);\n\n    private frame = util.createElement('div', {\n        style : { position : 'relative', overflow : 'hidden',\n          width : '400px', height : '200px' },\n        on : {\n          mousedown : (event) => {\n            if (util.closest(event.target, {\n                $el : this.hViewPane, root : this.frame }) ) {\n              this.editor.endEdit();\n              this.render();\n            } else if (util.closest(event.target, {\n                $el : this.vViewPane, root : this.frame }) ) {\n              this.editor.endEdit();\n              this.render();\n            }\n          },\n          keydown : (event) => {\n            switch(event.keyCode) {\n            case 9 : // Tab\n              event.preventDefault();\n              this.move({ row : 0, col : event.shiftKey? -1 : 1 });\n              break;\n            case 13 : // Enter\n              event.preventDefault();\n              this.move({ row : event.shiftKey? -1 : 1, col : 0 });\n              break;\n            }\n          },\n          wheel : (event) => {\n            this.hViewPane.scrollLeft += event.deltaX;\n            this.vViewPane.scrollTop += event.deltaY;\n          }\n        }\n      }, [this.hViewPane, this.vViewPane].concat(\n          this.tables.map(function(table) { return table.$el; }) ) );\n\n    private lockLines : HTMLElement[] = [];\n    private colResizeHandles : ColResizeHandle[] = [];\n\n    private getCellRect(row : number, col : number) {\n      var tableModel = this.tables[CM_INDEX].model;\n      var left = 0;\n      var top = 0;\n      for (var r = 0; r < row; r += 1) {\n        top += tableModel.getCellHeightAt(r);\n      }\n      for (var c = 0; c < col; c += 1) {\n        left += tableModel.getCellWidthAt(c);\n      }\n      return { left : left, top : top,\n        width : tableModel.getCellWidthAt(col),\n        height : tableModel.getCellHeightAt(row) };\n    }\n    private makeVisible(renderParams : RenderParams, row : number, col : number) {\n      var ltRect = renderParams.rects[LT_INDEX];\n      var scrollRect = renderParams.rects[CM_INDEX];\n      var delta = { left : 0, top : 0 };\n      var cellRect = this.getCellRect(row, col);\n      var left = cellRect.left + this.tables[CM_INDEX].left;\n      var top = cellRect.top + this.tables[CM_INDEX].top;\n      if (left < 0) {\n        delta.left = left;\n      } else if (left + cellRect.width > scrollRect.width) {\n        delta.left = left + cellRect.width - scrollRect.width;\n      }\n      if (top < 0) {\n        delta.top = top;\n      } else if (top + cellRect.height > scrollRect.height) {\n        delta.top = top + cellRect.height - scrollRect.height;\n      }\n      var scroll = {\n        left : renderParams.viewWidth > this.hViewPane.clientWidth?\n            util.translate(-this.tables[CM_INDEX].left + delta.left,\n            ltRect.width,\n            ltRect.width + renderParams.viewWidth - this.hViewPane.clientWidth,\n            0, renderParams.scrWidth - this.hViewPane.clientWidth, 'scroll.left') : 0,\n        top : renderParams.viewHeight > this.vViewPane.clientHeight?\n            util.translate(-this.tables[CM_INDEX].top + delta.top,\n            ltRect.height,\n            ltRect.height + renderParams.viewHeight - this.vViewPane.clientHeight,\n            0, renderParams.scrHeight - this.vViewPane.clientHeight, 'scroll.top') : 0\n      };\n      if (row >= this.getLockTop() ) {\n        this.vViewPane.scrollTop = scroll.top;\n      }\n      if (col >= this.getLockLeft() ) {\n        this.hViewPane.scrollLeft = scroll.left;\n      }\n    }\n    private cellSizeCache : CellSizeCache = null;\n    private beforeCellSizeChangeHandler : EventListener = null;\n    private getCellSizeCache() : CellSizeCache {\n      var width = this.$el.clientWidth;\n      var height = this.$el.clientHeight;\n      var tableModel = this.model;\n      if (this.beforeCellSizeChangeHandler == null) {\n        this.beforeCellSizeChangeHandler = (event : Event, detail : any) => {\n          // note: 'this' bind to table's.\n          this.cellSizeCache = null;\n        };\n      }\n      // observe cache size.\n      tableModel.off('beforecellsizechange', this.beforeCellSizeChangeHandler);\n      tableModel.on('beforecellsizechange', this.beforeCellSizeChangeHandler);\n      //\n      var rowCount = tableModel.getRowCount();\n      var columnCount = tableModel.getColumnCount();\n      var lockTop = this.getLockTop();\n      var lockLeft = this.getLockLeft();\n      var lockBottom = this.getLockBottom();\n      var lockRight = this.getLockRight();\n      if (!this.cellSizeCache ||\n          this.cellSizeCache.rowCount != rowCount ||\n          this.cellSizeCache.columnCount != columnCount ||\n          this.cellSizeCache.lockTop != lockTop ||\n          this.cellSizeCache.lockLeft != lockLeft ||\n          this.cellSizeCache.lockBottom != lockBottom ||\n          this.cellSizeCache.lockRight != lockRight ||\n          this.cellSizeCache.width != width ||\n          this.cellSizeCache.height != height) {\n        var rowPos = [ 0, lockTop, rowCount - lockBottom, rowCount ];\n        var colPos = [ 0, lockLeft, columnCount - lockRight, columnCount ];\n        var cw = colPos.slice(1).map(function() { return 0; });\n        var ch = rowPos.slice(1).map(function() { return 0; });\n        var idx : number, count : number;\n        idx = colPos.shift();\n        cw.forEach(function(_, i) {\n          for (count = colPos.shift(); idx < count; idx += 1) {\n            cw[i] += tableModel.getCellWidthAt(idx);\n          }\n        });\n        idx = rowPos.shift();\n        ch.forEach(function(_, i) {\n          for (count = rowPos.shift(); idx < count; idx += 1) {\n            ch[i] += tableModel.getCellHeightAt(idx);\n          }\n        });\n        var rects = this.tables.map(function(table) {\n          var rect = { left : 0, top : 0, width : 0, height : 0 };\n          for (var row = 0; row <= table.row; row += 1) {\n            (<any>rect)[row < table.row ? 'top' : 'height'] += ch[row];\n          }\n          for (var col = 0; col <= table.col; col += 1) {\n            (<any>rect)[col < table.col? 'left' : 'width'] += cw[col];\n          }\n          return rect;\n        });\n\n        var rbRect = rects[RB_INDEX];\n        this.tables.forEach(function(table, i) {\n          var rect = rects[i];\n          if (table.col == 1) {\n            rect.width = Math.max(0,\n              Math.min(rect.width, width - rect.left - rbRect.width) );\n          } else if (table.col == 2) {\n            rect.left = width - rbRect.width;\n          }\n          if (table.row == 1) {\n            rect.height = Math.max(0,\n              Math.min(rect.height, height - rect.top - rbRect.height) );\n          } else if (table.row == 2) {\n            rect.top = height - rbRect.height;\n          }\n        });\n\n        this.cellSizeCache = {\n          viewWidth : cw[1],\n          viewHeight : ch[1],\n          rects : rects,\n          rowCount : rowCount, columnCount : columnCount,\n          lockTop : lockTop, lockLeft : lockLeft,\n          lockBottom : lockBottom, lockRight : lockRight,\n          width : width, height : height\n        };\n      }\n      return this.cellSizeCache;\n    }\n    private getRenderParams() {\n      var width = this.$el.clientWidth;\n      var height = this.$el.clientHeight;\n      var cellSizeCache = this.getCellSizeCache();\n      var viewWidth = cellSizeCache.viewWidth;\n      var viewHeight = cellSizeCache.viewHeight;\n      var maxScr = 1E6;\n      var scrWidth = Math.min(viewWidth, maxScr);\n      var scrHeight = Math.min(viewHeight, maxScr);\n      return {\n        width : width,\n        height : height,\n        rects : cellSizeCache.rects,\n        viewWidth : viewWidth,\n        viewHeight : viewHeight,\n        scrWidth : scrWidth,\n        scrHeight : scrHeight\n      };\n    }\n    private getTargetTable(row : number, col : number) {\n      var t = this.getLockTop();\n      var b = this.model.getRowCount() - this.getLockBottom();\n      var l = this.getLockLeft();\n      var r = this.model.getColumnCount() - this.getLockRight();\n      return this.tables.filter( (table) => {\n        return table.row == (row < t? 0 : row >= b? 2 : 1) &&\n          table.col == (col < l? 0 : col >= r? 2 : 1);\n      })[0];\n    }\n    private isEditableAt(row : number, col : number) {\n      return this.model.getCellAt(row, col).editable;\n    }\n    private move(offset : { row : number, col : number }) {\n\n      if (this.editor.cell == null) {\n        return;\n      }\n      var row = this.editor.cell.row;\n      var col = this.editor.cell.col;\n      var tableModel = this.model;\n\n      var beginEditIfEditable = () => {\n        if (this.isEditableAt(row, col) ) {\n          this.editor.beginEdit(row, col, true);\n          return true;\n        }\n        return false;\n      };\n\n      var rowCount = tableModel.getRowCount();\n      var columnCount = tableModel.getColumnCount();\n\n      if (offset.row == -1 || offset.row == 1) {\n\n        do {\n          do {\n            var lineRowCount = tableModel.getLineRowCountAt(row);\n            var lineRow = tableModel.getLineRowAt(row);\n            var rowOffset = row - lineRow;\n            lineRow += offset.row;\n            if (lineRow < 0) {\n              lineRow = lineRowCount - 1;\n              col -= 1;\n              if (col < 0) {\n                lineRow = -1;\n                col = columnCount - 1;\n              }\n            } else if (lineRow >= lineRowCount) {\n              lineRow = 0;\n              col += 1;\n              if (col >= columnCount) {\n                lineRow = lineRowCount;\n                col = 0;\n              }\n            }\n            row = rowOffset + lineRow;\n            if (row < 0) {\n              row = rowCount - 1;\n            } else if (row >= rowCount) {\n              row = 0;\n            }\n          } while (tableModel.checkSpaned(row, col) );\n        } while (!beginEditIfEditable() );\n\n      } else if (offset.col == -1 || offset.col == 1) {\n\n        do {\n          do {\n            col += offset.col;\n            if (col < 0) {\n              col = columnCount - 1;\n              row = (row - 1 + rowCount) % rowCount;\n            } else if (col >= columnCount) {\n              col = 0;\n              row = (row + 1) % rowCount;\n            }\n          } while (tableModel.checkSpaned(row, col) );\n        } while (!beginEditIfEditable() );\n      }\n    }\n    private renderColumnResizeHandlers(renderParams : RenderParams) {\n      var mousedownHandler = (event : Event) => {\n        var mouseupHandler = (event : Event) => {\n          util.$(document).off('mousemove', mousemoveHandler).\n            off('mouseup', mouseupHandler);\n          this.frame.removeChild(block);\n          util.set(handle.$el.childNodes[0],\n              { style : { display : 'none' } });\n          var deltaX = event.pageX - dragPoint.x;\n          var cellWidth = tableModel.getCellWidthAt(handle.col);\n          tableModel.trigger('beforecellsizechange');\n          tableModel.trigger('cellsizechange', {\n            col : handle.col,\n            cellWidth : Math.max(tableModel.minCellWidth, cellWidth + deltaX) });\n          this.invalidate();\n        };\n        var mousemoveHandler = function(event : Event) {\n          var deltaX = event.pageX - dragPoint.x;\n          var cellWidth = tableModel.getCellWidthAt(handle.col);\n          deltaX = Math.max(tableModel.minCellWidth, cellWidth + deltaX) - cellWidth;\n          handle.$el.style.left = (handle.left + deltaX) + 'px';\n        };\n        if (event.which != 1) {\n          return;\n        }\n        event.preventDefault();\n        this.editor.endEdit();\n        var handleIndex = this.colResizeHandles.map(function(handle) {\n          return handle.$el; } ).indexOf(event.currentTarget);\n        var handle = this.colResizeHandles[handleIndex];\n        var dragPoint = { x : event.pageX, y : event.pageY };\n        util.set(handle.$el.childNodes[0], { style : { display : '' } });\n        var block = util.createElement('div', {\n          style : {\n            position : 'absolute', left : '0px', top : '0px',\n            backgroundColor : handleStyle.backgroundColor,\n            cursor : handleStyle.cursor,\n            width : clientWidth + 'px',\n            height : clientHeight + 'px'\n          }\n        });\n        this.frame.appendChild(block);\n        util.$(document).on('mousemove', mousemoveHandler).\n          on('mouseup', mouseupHandler);\n      };\n      var getOrCrt = () : ColResizeHandle => {\n        if (handleIndex < this.colResizeHandles.length) {\n          return this.colResizeHandles[handleIndex];\n        }\n        var handle = { $el : util.createElement('div', {\n          style : {\n            position : 'absolute',\n            backgroundColor : handleStyle.backgroundColor,\n            overflow : 'visible', top : '0px',\n            width : (handleStyle.offset * 2 + handleStyle.lineWidth) + 'px',\n            cursor : handleStyle.cursor\n          },\n          on : { mousedown : mousedownHandler }\n        }, [util.createElement('div',{\n          attrs : { 'class' : '${prefix}-v-resize-line' },\n          style : {\n            position : 'absolute',\n            left : handleStyle.offset + 'px', top : '0px', width : '0px',\n            borderLeftWidth : handleStyle.lineWidth + 'px' }\n        })]) };\n        this.frame.appendChild(handle.$el);\n        this.colResizeHandles.push(handle);\n        return handle;\n      };\n      var handleStyle = {\n        offset : 3,\n        lineWidth : 1,\n        cursor : 'ew-resize',\n        backgroundColor : 'rgba(0,0,0,0)'\n      };\n      var handleIndex = 0;\n      var tableModel = this.model;\n      var cmRect = renderParams.rects[CM_INDEX];\n      var rbRect = renderParams.rects[CM_INDEX];\n      var clientWidth = cmRect.left + cmRect.width + rbRect.width;\n      var clientHeight = cmRect.top + cmRect.height + rbRect.height;\n      this.tables.forEach( (table, i) => {\n        if (table.row == 0) {\n          // header\n          var rect = renderParams.rects[i];\n          var tableState = table.tableState;\n          var left = tableState.left + rect.left -\n            handleStyle.offset - handleStyle.lineWidth;\n          var height = rect.height;\n          for (var col = tableState.minCol; col <= tableState.maxCol;\n              col += 1, handleIndex += 1) {\n            var handle = getOrCrt();\n            left += tableModel.getCellWidthAt(col);\n            if (left > clientWidth) {\n              break;\n            }\n            if (!this.model.isColumnResizableAt(col) ) {\n              continue;\n            }\n            util.set(handle.$el, { style : { display : '',\n              left : left + 'px', height : height + 'px' } });\n            util.set(handle.$el.childNodes[0], {\n              style : { display : 'none', height : clientHeight + 'px' } });\n            handle.col = col;\n            handle.left = left;\n          }\n        }\n      });\n      for (; handleIndex < this.colResizeHandles.length; handleIndex += 1) {\n        util.set(this.colResizeHandles[handleIndex].$el, {\n          style : { display : 'none', left : '0px', height : '0px' } });\n      }\n    }\n    public render(visibleCell? : { row : number, col : number }) {\n\n      var renderParams = this.getRenderParams();\n      var ltRect = renderParams.rects[LT_INDEX];\n      var rbRect = renderParams.rects[RB_INDEX];\n\n      var viewWidth = renderParams.width - ltRect.width;\n      var viewHeight = renderParams.height - ltRect.height;\n\n      // check if scrollbar shown.\n      var barSize = this.measureBarSize();\n      if (renderParams.scrWidth < viewWidth - rbRect.width) {\n        barSize.height = 0;\n      }\n      if (renderParams.scrHeight < viewHeight - rbRect.height) {\n        barSize.width = 0;\n      }\n\n      util.extend(this.hScr.style, {\n        width : renderParams.scrWidth + 'px', height : '1px' });\n      util.extend(this.hViewPane.style, {\n        left : ltRect.width + 'px', top : ltRect.height + 'px',\n        width : (viewWidth - rbRect.width - barSize.width) + 'px',\n        height : viewHeight + 'px' });\n\n      util.extend(this.vScr.style, {\n        width : '1px', height : renderParams.scrHeight + 'px' });\n      util.extend(this.vViewPane.style, {\n        left : ltRect.width + 'px', top : ltRect.height + 'px',\n        width : viewWidth + 'px',\n        height : (viewHeight - rbRect.height - barSize.height) + 'px' });\n\n      var hViewPane = this.hViewPane;\n      var vViewPane = this.vViewPane;\n      var barWidth = vViewPane.offsetWidth - vViewPane.clientWidth;\n      var barHeight = hViewPane.offsetHeight - hViewPane.clientHeight;\n\n      this.tables.forEach( (table, i) => {\n        var rect = renderParams.rects[i];\n        if (rbRect.width + barWidth > renderParams.width - rbRect.left) {\n          if (table.col == 1) {\n            rect.width -= barWidth;\n          }\n          if (table.col == 2) {\n            rect.left -= barWidth;\n          }\n        }\n        if (rbRect.height + barHeight > renderParams.height - rbRect.top) {\n          if (table.row == 1) {\n            rect.height -= barWidth;\n          }\n          if (table.row == 2) {\n            rect.top -= barWidth;\n          }\n        }\n      });\n\n      if (visibleCell) {\n        this.makeVisible(renderParams, visibleCell.row, visibleCell.col);\n      }\n\n      this.tables.forEach( (table, i) => {\n        var rect = renderParams.rects[i];\n        if (table.col == 1) {\n          table.left = -(renderParams.scrWidth > hViewPane.clientWidth?\n                util.translate(hViewPane.scrollLeft,\n                0, renderParams.scrWidth - hViewPane.clientWidth,\n                ltRect.width,\n                ltRect.width +\n                  renderParams.viewWidth - hViewPane.clientWidth,\n                'table.left') : ltRect.width);\n        }\n        if (table.row == 1) {\n          table.top = -(renderParams.scrHeight > vViewPane.clientHeight?\n                util.translate(vViewPane.scrollTop,\n                0, renderParams.scrHeight - vViewPane.clientHeight,\n                ltRect.height,\n                ltRect.height +\n                  renderParams.viewHeight - vViewPane.clientHeight,\n                'table.top') : ltRect.height);\n        }\n        if (table.col == 2) {\n          table.left = -(ltRect.width + renderParams.viewWidth);\n        }\n        if (table.row == 2) {\n          table.top = -(ltRect.height + renderParams.viewHeight);\n        }\n\n        table.model = this.model;\n        util.extend(table.$el.style, {\n          left : rect.left + 'px', top : rect.top + 'px',\n          width : rect.width + 'px', height : rect.height + 'px' });\n        table.render();\n\n      });\n\n      if (this.editor.cell != null) {\n        this.editor.beginEdit(this.editor.cell.row, this.editor.cell.col);\n      }\n\n      // lock lines.\n      ( () => {\n        while (this.lockLines.length < 4) {\n          var line = util.createElement('div', {\n            style : { position : 'absolute' } });\n          this.frame.appendChild(line);\n          this.lockLines.push(line);\n        }\n        var width = 0;\n        var height = 0;\n        this.tables.forEach(function(table, i) {\n          var rect = renderParams.rects[i];\n          if (table.row == 0) { width += rect.width; }\n          if (table.col == 0) { height += rect.height; }\n        });\n        // top\n        util.set(this.lockLines[0], {\n          attrs :{ 'class' : '${prefix}-h-lock-line' },\n          style : {\n            display : this.getLockTop() == 0? 'none' : '', left : '0px',\n            top : (ltRect.height - 1) + 'px', width : width + 'px'\n          } });\n        // left\n        util.set(this.lockLines[1], {\n          attrs :{ 'class' : '${prefix}-v-lock-line' },\n          style : {\n            display : this.getLockLeft() == 0? 'none' : '', top : '0px',\n            left : (ltRect.width - 1) + 'px', height : height + 'px'\n          } });\n        // bottom\n        util.set(this.lockLines[2], {\n          attrs :{ 'class' : '${prefix}-h-lock-line' },\n          style : {\n            display : this.getLockBottom() == 0? 'none' : '', left : '0px',\n            top : (height - rbRect.height - 1) + 'px', width : width + 'px'\n          } });\n        // right\n        util.set(this.lockLines[3], {\n          attrs :{ 'class' : '${prefix}-v-lock-line' },\n          style : {\n            display : this.getLockRight() == 0? 'none' : '', top : '0px',\n            left : (width - rbRect.width - 1) + 'px', height : height + 'px'\n          } });\n      } )();\n\n      // resize handles.\n      if (this.getLockTop() > 0) {\n        this.renderColumnResizeHandlers(renderParams);\n      }\n\n      this.trigger('rendered', {\n        tableStates : this.tables.map(function(table) {\n          return table.tableState;\n        })\n      } );\n    }\n\n    private createInternalEditor() : InternalEditor {\n      var table = this;\n      return {\n        impl : null,\n        cell : null,\n        beginEdit : function(row, col, makeVisible) {\n          this.endEdit();\n          if (makeVisible) {\n            table.render({ row : row, col : col });\n          }\n          this.cell = { row : row, col : col };\n          var target = table.getTargetTable(row, col);\n          var index = target.tableState.indexById[util.getCellId(row, col)];\n          if (index) {\n            var td = target.tbody.children[index.trIndex].children[index.tdIndex];\n            this.impl = td.renderer.beginEdit(table.model.getCellAt(row, col) );\n            this.impl.focus();\n          }\n        },\n        endEdit : function() {\n          if (this.impl != null) {\n            var endState = this.impl.endEdit();\n            if (endState) {\n              table.model.trigger('valuechange', {\n                row : this.cell.row,\n                col : this.cell.col,\n                oldValue : endState.oldValue,\n                newValue : endState.newValue\n              });\n            }\n            this.impl = null;\n          }\n          this.cell = null;\n        }\n      };\n    }\n\n    public $el = this.frame;\n    public getLockTop() { return 0; }\n    public getLockLeft() { return 0; }\n    public getLockBottom() { return 0; }\n    public getLockRight() { return 0; }\n    public forEachCells(callback : any) {\n      this.tables.forEach(function(table) {\n        (table.tbody.children || []).forEach(function(tr) {\n          (tr.children || []).forEach(function(cell) {\n            callback(<any>cell);\n          });\n        });\n      });\n    }\n    public editor = this.createInternalEditor();\n    public model : TableModel = null;\n  }\n\n}\n","/*!\n * comfortable\n *\n * Copyright (c) 2018 Kazuhiko Arase\n *\n * URL: https://github.com/kazuhikoarase/comfortable-js/\n *\n * Licensed under the MIT license:\n *  http://www.opensource.org/licenses/mit-license.php\n */\n\nnamespace comfortable {\n\n  'use strict';\n\n  export interface Menu {\n    dispose : () => void;\n  }\n\n  export interface MenuItem {\n    label : string;\n    action? : (event? : Event) => void;\n    children? : () => MenuItem[];\n  }\n\n  export var ui = {\n\n    createButton : function(\n        label : string, action : (event : Event) => void) {\n      return util.createElement('button',{\n        props : { textContent : label },\n        attrs : { 'class' : '${prefix}-button' },\n        on : { mousedown : function(event : Event) {\n          event.preventDefault();\n        }, click : function(event : Event) { action(event); } } });\n    },\n  \n    createDialog : function(children : HTMLElement[]) {\n      var dialog = util.extend(new EventTargetImpl(), {\n        $el : util.createElement('div', {\n            attrs : { 'class' : '${prefix}-dialog' },\n            style : { position : 'absolute' }\n        }, children),\n        show : function() {\n          document.body.appendChild(this.$el);\n          this.trigger('beforeshow');\n          util.callLater(function() {\n            util.$(document).on('mousedown', mousedownHandler);\n          });\n        },\n        dispose : function() {\n          if (this.$el) {\n            util.$(document).off('mousedown', mousedownHandler);\n            document.body.removeChild(this.$el);\n            this.$el = null;\n            this.trigger('dispose');\n          }\n        }\n      } );\n      var mousedownHandler = function(event : Event) {\n        if (!util.closest(event.target,\n            { $el : dialog.$el, root : document.body }) ) {\n          dialog.dispose();\n        }\n      };\n      return dialog;\n    },\n\n    showMenu : function(\n        left : number, top : number, menuItems : MenuItem[]) : Menu {\n      var subMenu : Menu = null;\n      var menu = util.createElement('div', {\n        attrs : { 'class' : '${prefix}-contextmenu' },\n        style : { position : 'absolute', left : left + 'px', top : top + 'px' } },\n        <HTMLElement[]>menuItems.map(function(menuItem) {\n          return util.createElement('div', {\n              attrs : { 'class' : '${prefix}-menuitem ${prefix}-clickable' },\n              props : { textContent : menuItem.label },\n              style : { position : 'relative', whiteSpace : 'nowrap' },\n              on : {\n                mouseover : function(event : Event) {\n                  if (subMenu != null) {\n                    subMenu.dispose();\n                    subMenu = null;\n                  }\n                  if (subMenu == null && menuItem.children) {\n                    subMenu = ui.showMenu(\n                        left + event.target.offsetWidth,\n                        top + event.target.offsetTop,\n                        menuItem.children() );\n                  }\n                },\n                mousedown : function(event : Event) {\n                  if (menuItem.action) {\n                    menuItem.action(event);\n                  }\n                }\n              }\n            } );\n          }) );\n      var dispose = function() {\n        if (menu != null) {\n          document.body.removeChild(menu);\n          menu = null;\n        }\n      };\n      var mousedownHandler = function(event : Event) {\n        util.$(document).off('mousedown', mousedownHandler);\n        dispose();\n      };\n      util.$(document).on('mousedown', mousedownHandler);\n      document.body.appendChild(menu);\n      return { dispose : dispose };\n    }\n  }\n\n}\n","/*!\n * comfortable\n *\n * Copyright (c) 2018 Kazuhiko Arase\n *\n * URL: https://github.com/kazuhikoarase/comfortable-js/\n *\n * Licensed under the MIT license:\n *  http://www.opensource.org/licenses/mit-license.php\n */\n\nnamespace comfortable {\n\n  'use strict';\n\n  export interface ElementOptions {\n    attrs? : { [ key : string ] : string };\n    style? : { [ key : string ] : string };\n    props? : { [ key : string ] : any };\n    on? : { [ type : string ] : (event : any) => void };\n  }\n\n  export interface CreateElement {\n    (tagName : string,\n        opts? : ElementOptions, children? : HTMLElement[]) : HTMLElement;\n    (tagName : string,\n        children? : HTMLElement[], opts? : ElementOptions) : HTMLElement;\n  }\n\n  var parseArguments = function(args : IArguments) {\n    var children : any[] = [];\n    var opts = {};\n    for (var i = 1; i < args.length; i += 1) {\n      var a = args[i];\n      if (typeof a == 'object') {\n        if (typeof a.splice == 'function') {\n          children = a;\n        } else {\n          opts = a;\n        }\n      }\n    }\n    return { children : children, opts : opts };\n  }\n\n  var classNamePrefixRe = /\\$\\{prefix\\}/g;\n  var replaceClassNamePrefix = function(className : string) {\n    return className.replace(classNamePrefixRe, classNamePrefix);\n  }\n\n  var wideNumChars = '';\n  var narrowNumChars = '0123456789+-.,';\n  if (wideNumChars.length != narrowNumChars.length) {\n    throw wideNumChars + ',' + narrowNumChars;\n  }\n\n  export class $ {\n\n    private elm : HTMLElement|Document;\n\n    constructor(elm : HTMLElement|Document) {\n      this.elm = elm;\n    }\n\n    public on(type : string, listener : EventListener) {\n      this.elm.addEventListener(type, listener);\n      return this;\n    }\n    public off(type : string, listener : EventListener) {\n      this.elm.removeEventListener(type, listener);\n      return this;\n    }\n    public addClass(className : string, remove? : boolean) {\n      className = replaceClassNamePrefix(className);\n      var classes = '';\n      ((<HTMLElement>this.elm).getAttribute('class') || '').split(/\\s+/g).\n          forEach(function(c : string) {\n        if (c != className) {\n          classes += ' ' + c;\n          return;\n        }\n      } );\n      if (!remove) {\n        classes += ' ' + className;\n      }\n      (<HTMLElement>this.elm).setAttribute('class', classes);\n      return this;\n    }\n    public removeClass(className : string) {\n      return this.addClass(className, true);\n    }\n  }\n\n  export var util = {\n\n    extend : function(arg : any, ...args : any[]) : any {\n      var o = arguments[0];\n      for (var i = 1; i < arguments.length; i += 1) {\n        var a = arguments[i];\n        for (var k in a) {\n          o[k] = a[k];\n        };\n      }\n      return o;\n    },\n\n    callLater : function(cb : () => void) {\n      window.setTimeout(cb, 0);\n    },\n\n    set : function(\n        elm : Node, opts : ElementOptions) {\n      if (opts.attrs) {\n        for (var k in opts.attrs) {\n          var v = opts.attrs[k];\n          var t = typeof v;\n          if (t == 'number' || t == 'boolean') {\n            v = '' + v;\n          } else if (t == 'undefined') {\n            v = '';\n          }\n          if (typeof v != 'string') {\n            throw 'bad attr type for ' + k + ':' + (typeof v);\n          }\n          if (k == 'class') {\n            v = replaceClassNamePrefix(v);\n          }\n          (<any>elm).setAttribute(k, v);\n        }\n      }\n      if (opts.props) {\n        for (var k in opts.props) {\n          (<any>elm)[k] = opts.props[k];\n        }\n      }\n      if (opts.style) {\n        for (var k in opts.style) {\n          (<any>elm).style[k] = opts.style[k] || '';\n        }\n      }\n      if (opts.on) {\n        for (var k in opts.on) {\n          elm.addEventListener(k, opts.on[k]);\n        }\n      }\n      return elm;\n    },\n\n    createElement : function(tagName : string) {\n      var args = parseArguments(arguments);\n      var elm = document.createElement(tagName);\n      args.children.forEach(function(child) { elm.appendChild(child); });\n      return this.set(elm, args.opts);\n    } as CreateElement,\n\n    createSVGElement : function(tagName : string) {\n      var args = parseArguments(arguments);\n      var elm = document.createElementNS('http://www.w3.org/2000/svg', tagName);\n      args.children.forEach(function(child) { elm.appendChild(child); });\n      return this.set(elm, args.opts);\n    } as CreateElement,\n\n    $ : function(elm : HTMLElement|Document) { return new $(elm); },\n\n    closest : function(elm : HTMLElement,\n        opts : { className? : string,\n          tagName? : string, root? : HTMLElement, $el? : HTMLElement} ) {\n      if (typeof opts.className == 'string') {\n        opts.className = replaceClassNamePrefix(opts.className);\n      }\n      while (elm != null && elm.nodeType == 1 && elm != opts.root) {\n        if (typeof opts.tagName == 'string' && elm.tagName == opts.tagName) {\n          return elm;\n        } else if (typeof opts.$el == 'object' && elm == opts.$el) {\n          return elm;\n        } else if (typeof opts.className == 'string' &&\n            (elm.getAttribute('class') || '').split(/\\s+/g).indexOf(opts.className)!= -1) {\n          return elm;\n        }\n        elm = <HTMLElement>elm.parentNode;\n      }\n      return null;\n    },\n\n    indexOf : function(elm : Node) {\n      if (elm == null) {\n        return -1;\n      }\n      return Array.prototype.indexOf.call(elm.parentNode.childNodes, elm);\n    },\n\n    offset : function(elm : HTMLElement) {\n      var off = { left : 0, top : 0 };\n      var e : HTMLElement;\n      var base : HTMLElement = null;\n      for (e = elm; e.parentNode != null; e = <HTMLElement>e.parentNode) {\n        if (e.offsetParent != null) {\n          base = e;\n          break;\n        }\n      }\n      if (base != null) {\n        for (e = base; e.offsetParent != null; e = <HTMLElement>e.offsetParent) {\n          off.left += e.offsetLeft;\n          off.top += e.offsetTop;\n        }\n      }\n      for (e = elm; e.parentNode != null &&\n            e != document.body; e = <HTMLElement>e.parentNode) {\n        off.left -= e.scrollLeft;\n        off.top -= e.scrollTop;\n      }\n      return off;\n    },\n\n    moveSublist : function(list : any[],\n        from : number, length : number, to : number) {\n      var i1 = list.slice(from, from + length);\n      var i2 = list.slice(0, from).concat(list.slice(from + length) );\n      to = from < to? to - length : to;\n      return i2.slice(0, to).concat(i1).concat(i2.slice(to) );\n    },\n\n    getCellId : function(row : number, col : number) {\n      return row + ':' + col;\n    },\n\n    translate : function(\n        val1 : number,\n        min1 : number, max1 : number,\n        min2 : number, max2 : number,\n        log? : string) {\n      var val2 = (val1 - min1) * (max2 - min2) / (max1 - min1) + min2;\n      return Math.max(min2, Math.min(Math.round(val2), max2) );\n    },\n\n    // num utils\n\n    numRe : /^([\\+\\-]?)([0-9]*)(\\.[0-9]*)?$/,\n\n    formatNumber : function(value : string,\n        digits? : number, s1? : string, s2? : string) {\n      digits = digits || 0;\n      s1 = typeof s1 == 'string'? s1 : ',';\n      s2 = typeof s2 == 'string'? s2 : '.';\n      if (typeof value == 'number') {\n        value = '' + value;\n      }\n      if (typeof value != 'string') {\n        return '';\n      }\n      var mat = value.match(util.numRe);\n      if (mat) {\n        if (mat[2].length == 0 && (!mat[3] || mat[3].length == 1) ) {\n          return '';\n        }\n        var iPart = mat[2].length > 0? mat[2] : '0';\n        while (iPart.length > 1 && iPart.charAt(0) == '0') {\n          iPart = iPart.substring(1);\n        }\n        var neg = mat[1] == '-';\n        var s = '';\n        while (iPart.length > 3) {\n          s = s1 + iPart.substring(iPart.length - 3) + s;\n          iPart = iPart.substring(0, iPart.length - 3);\n        }\n        s = iPart + s;\n        if (digits > 0) {\n          var fPart = mat[3] || s2;\n          s += s2;\n          for (var i = 0; i < digits; i += 1) {\n            s += (i + 1 < fPart.length)? fPart[i + 1] : '0';\n          }\n        }\n        return (neg && s != '0')? '-' + s : s;\n      }\n      return value;\n    },\n\n    toNarrowNumber : function(value : string) {\n      var s = '';\n      for (var i = 0; i < value.length; i += 1) {\n        var c = value.charAt(i);\n        var index = wideNumChars.indexOf(c);\n        s += (index != -1)? narrowNumChars.charAt(index) : c;\n      }\n      return s;\n    }\n  }\n\n}\n","/*!\n * comfortable\n *\n * Copyright (c) 2018 Kazuhiko Arase\n *\n * URL: https://github.com/kazuhikoarase/comfortable-js/\n *\n * Licensed under the MIT license:\n *  http://www.opensource.org/licenses/mit-license.php\n */\n\nnamespace comfortable {\n\n  'use strict';\n\n  export interface TableTemplateCellStyle\n  extends TableCellStyle, CellRendererFactoryOpts {\n\n    width? : number;\n    height? : number;\n\n    columnDraggable? : boolean;\n    columnResizable? : boolean;\n\n    dataField? : string;\n\n    /** one of 'string(default)', 'number', 'boolean', 'select-one' */\n    dataType? : string;\n\n    /** dataType : 'string', 'number' */\n    maxLength? : number;\n\n    /** dataType : 'number' */\n    decimalDigits? : number;\n\n    /** dataType : 'boolean',\n      2 elements array like [falseValue, trueValue].\n     */\n    booleanValues? : any[];\n\n    /** dataType : 'select-one' */\n    options? : (any[] | ((row : number, col : number) => any[]) );\n    labelField? : string;\n    valueField? : string;\n\n    factory? : TableCellRendererFactory;\n\n    label? : (string | ((model : TemplateTableModel) => string) );\n    /** dataType : 'number' */\n    comparator? : (v1 : any, v2 : any) => number;\n  }\n\n  export interface TableTemplate {\n    lockColumn? : number;\n    thead? : TableTemplateCellStyle[][];\n    tbody? : TableTemplateCellStyle[][];\n    tfoot? : TableTemplateCellStyle[][];\n  }\n\n  export interface ItemIndex {\n    row : number;\n    /** col will be string if dataField is defined. */\n    col : (number | string);\n  }\n\n  export interface TemplateTableModel extends TableModel {\n    filterContext : FilterContext;\n    defaultHeaderCellRendererFactory : TableCellRendererFactory;\n    items : any[];\n    filteredItems : any[];\n    resetFilter : () => void;\n    getItemAt : (row : number) => any;\n    getItemCount : () => number;\n    getItemIndexAt : (row : number, col : number) => ItemIndex;\n    getOrderedColumnIndexAt : (col : number) => number;\n    orderedColumnIndices : number[];\n    hiddenColumns : { [ orderedCol : number ] : boolean };\n    hoverRow : number;\n  }\n\n  export interface TemplateTableCell extends TableCell {\n    dataField? : string;\n    comparator? : (a: any, b: any) => number;\n  }\n\n  export type Rejects = { [ value : string ] : boolean };\n\n  export interface FilterContext {\n    sort? : { dataField : string; sortOrder : string; }\n    filters : { [ dataField : string ] : Rejects };\n  }\n\n  export interface TemplateTable extends Table {\n    enableLockColumn : boolean;\n    defaultLockColumn : number;\n    setLockLeft : (lockLeft : number) => void;\n  }\n\n}\n","/*!\n * comfortable\n *\n * Copyright (c) 2018 Kazuhiko Arase\n *\n * URL: https://github.com/kazuhikoarase/comfortable-js/\n *\n * Licensed under the MIT license:\n *  http://www.opensource.org/licenses/mit-license.php\n */\n\nnamespace comfortable {\n\n  'use strict';\n\n  interface Selector {\n    $el : HTMLElement,\n    selected : boolean,\n    setSelected : (selected : boolean) => void;\n    isSelected : () => boolean;\n  }\n\n  interface CheckBox {\n    $el : HTMLElement;\n    checked : boolean;\n    setIncomplete : (incomplete : boolean) => void;\n    setChecked : (checked : boolean) => void;\n    isChecked : () => boolean;\n  }\n\n  interface FilterButton {\n    $el : HTMLElement;\n    cell : TemplateTableCell;\n    filtered : boolean;\n    sortOrder : string;\n    setFiltered : (filtered : boolean) => void;\n    setSortOrder : (sortOrder : string) => void;\n    update : () => void;\n  }\n\n  interface FilterDialogOptions extends CellRendererFactoryOpts {\n    sortOrder : string;\n    filterValues : any[];\n    rejects : Rejects;\n  }\n\n  interface FilterDialog extends EventTarget {\n    render : (cell : TableCell) => void;\n    beginEdit : (cell : TableCell) => {\n      focus : () => void;\n      endEdit : () => void;\n    };\n    dispose : () => void;\n  }\n\n  interface FilterItem {\n    index: number;\n    label: any;\n    value: string;\n    checked: boolean;\n    color: boolean;\n    incomplete? : boolean;\n  }\n\n  export var SortOrder = { ASC : 'asc', DESC : 'desc' };\n\n  // selector of sort order\n  var createSelector = function() : Selector {\n    var rect = util.createElement('span', {\n      attrs : { 'class' : '${prefix}-selector-body' }, \n      style : { display:'inline-block', width:'12px', height : '12px' }\n    });\n    return {\n      $el : rect,\n      selected : false,\n      setSelected : function(selected) {\n        this.selected = selected;\n        util.$(rect).addClass('${prefix}-selected', !selected);\n      },\n      isSelected : function() {\n        return this.selected;\n      }\n    };\n  };\n\n  // filter checkbox\n  var createCheckbox = function() : CheckBox {\n\n    // fix for layout collapse by bootstrap.\n    var antiBsGlobals : { [k : string] : string } = {\n        verticalAlign :'baseline',\n        boxSizing : 'content-box',\n        lineHeight : '1' };\n\n    var path = util.createSVGElement('path', { attrs : {\n        'class' : '${prefix}-checkbox-check',\n        d : 'M 2 5 L 5 9 L 10 3'\n      },\n      style : antiBsGlobals });\n    return {\n      $el : util.createElement('span', {\n        attrs : { 'class' : '${prefix}-checkbox-body' }, \n        style : util.extend(antiBsGlobals, { display : 'inline-block',\n          width : '12px', height : '12px' }\n        )}, [\n          util.createSVGElement('svg', {\n            attrs : { width : '12', height : '12' },\n            style : antiBsGlobals }, [ path ])\n        ] ),\n      checked : true,\n      setIncomplete : function(incomplete) {\n        util.$(path).addClass(\n            '${prefix}-checkbox-incomplete-check', !incomplete);\n      },\n      setChecked : function(checked) {\n        this.checked = checked;\n        path.style.display = this.checked? '' : 'none';\n      },\n      isChecked : function() {\n        return this.checked;\n      }\n    };\n  };\n\n  var createFilterDialog = function(opts : FilterDialogOptions, cell : TemplateTableCell) {\n\n    var messages = i18n.getMessages();\n    var labelStyle : { [ k : string ] : string } =\n      { marginLeft : '4px', verticalAlign : 'middle' };\n\n    var createSortButton = function(label : string) {\n      var selector = createSelector();\n      selector.$el.style.verticalAlign = 'middle';\n      return {\n        selector : selector,\n        $el : util.createElement('div', [\n          selector.$el,\n          util.createElement('span', {\n            style : labelStyle, props : { textContent : label } })\n        ], { attrs : { 'class' : '${prefix}-clickable-op' }, on : {\n          mousedown : function(event) { event.preventDefault(); },\n          click : function() { dialog.trigger('sortclick',\n              { label : label }); }\n        } })\n      };\n    };\n\n    var sortAscButton = createSortButton(messages.SORT_ASC);\n    var sortDescButton = createSortButton(messages.SORT_DESC);\n\n    var filterItems : FilterItem[] = [ messages.SELECT_ALL ]\n      .concat(opts.filterValues)\n      .map(function(value, i) {\n        return {\n          index : i,\n          label : (i > 0)? opts.labelFunction(value, cell) : value,\n          value : value,\n          checked : (i > 0)? !opts.rejects[value] : true,\n          color : false\n        };\n      });\n\n    class FilterItemCell implements ListCell {\n      public checkbox = (() => {\n        var checkbox = createCheckbox();\n        checkbox.$el.style.verticalAlign = 'middle';\n        return checkbox;\n      })();\n      private label = util.createElement('span', { style : labelStyle,\n        props : { textContent : 'M' } });\n      public index = 0;\n      public row = 0;\n      public setLabel(text : string) {\n        this.label.textContent = text || messages.SELECT_BLANK;\n        this.$el.setAttribute('title', this.label.textContent);\n      }\n      public $el = util.createElement('div', {\n          attrs : { 'class' : '${prefix}-clickable-op' },\n          on : {\n            mousedown : (event) => { event.preventDefault(); },\n            click : () => {\n              dialog.trigger('filterclick', { index : this.index });\n            }\n          }\n        }, [ this.checkbox.$el, this.label ])\n    }\n\n    class FilterItemList extends ListImpl<FilterItem,FilterItemCell> {\n      public items = filterItems;\n      public getItemAt(row : number) { return this.items[row]; }\n      public getItemCount() { return this.items.length; }\n      public createCell() {\n        return new FilterItemCell();\n      }\n      public renderCell(cell : FilterItemCell, item : FilterItem) {\n        cell.index = item.index;\n        cell.setLabel(item.label);\n        cell.checkbox.setChecked(item.checked);\n        cell.checkbox.setIncomplete(item.incomplete);\n      }\n      public height = 0;\n      public maxHeight = 150;\n    }\n\n    var filterItemList = new FilterItemList();\n    filterItemList.on('rendered', function(event : Event, detail : any) {\n      var height = Math.min(this.maxHeight,\n          this.cellHeight * this.getItemCount() );\n      if (this.height != height) {\n        this.height = height;\n        this.$el.style.height = height + 'px';\n        this.invalidate();\n      }\n    })\n    filterItemList.$el.style.width = '150px';\n    filterItemList.$el.style.height = '0px';\n    filterItemList.invalidate();\n\n    var dialog = util.extend(ui.createDialog([\n      // sort\n      sortAscButton.$el,\n      sortDescButton.$el,\n      // search box\n      util.createElement('input', { attrs : { type : 'text' },\n        style : { width : '150px', margin : '4px 0px' },\n        on : { keyup : function(event) {\n          var value = event.currentTarget.value;\n          filterItemList.items = filterItems.filter(function(filterItem) {\n            return !(value && filterItem.label.indexOf(value) == -1);\n          });\n          filterItemList.invalidate();\n        }} }),\n      // filter items\n        filterItemList.$el,\n      // buttons\n      util.createElement('div', { style :\n          { marginTop : '4px', display : 'inline-block', float : 'right' } },\n        [\n          ui.createButton(messages.OK, function() {\n            dialog.dispose();\n            dialog.trigger('applyfilter');\n          }),\n          ui.createButton(messages.CANCEL, function() {\n            dialog.dispose();\n          })\n        ])\n    ]), {\n      sortOrder : opts.sortOrder, rejects : opts.rejects\n    } ).on('sortclick', function(event : Event, detail : any) {\n\n      if (detail.label == messages.SORT_ASC) {\n        this.sortOrder = this.sortOrder == SortOrder.ASC? null : SortOrder.ASC;\n      }\n      if (detail.label == messages.SORT_DESC) {\n        this.sortOrder = this.sortOrder == SortOrder.DESC? null : SortOrder.DESC;\n      }\n\n      this.trigger('sortchange');\n\n      this.dispose();\n      this.trigger('applysort');\n\n    }).on('sortchange', function() {\n\n      sortAscButton.selector.setSelected(this.sortOrder == SortOrder.ASC);\n      sortDescButton.selector.setSelected(this.sortOrder == SortOrder.DESC);\n\n    } ).on('filterclick', function(event : Event, detail : any) {\n\n      if (detail.index == 0) {\n        // select all\n        var selectCount = 0;\n        filterItems.forEach(function(filterItem, i) {\n          if (i > 0 && filterItem.checked) {\n            selectCount += 1;\n          }\n        });\n        var selectAll = selectCount != filterItems.length - 1;\n        filterItems.forEach(function(filterItem, i) {\n          if (i > 0) {\n            filterItem.checked = selectAll;\n          }\n        });\n      } else {\n        var filterItem = filterItems[detail.index];\n        filterItem.checked = !filterItem.checked;\n      }\n\n      var rejects : Rejects = {};\n      filterItems.forEach(function(filterItem, i) {\n        if (i > 0 && !filterItem.checked) {\n          rejects[filterItem.value] = true;\n        }\n      });\n\n      this.rejects = rejects;\n      this.trigger('filterchange');\n\n    }).on('filterchange', function() {\n\n      var rejectCount = 0;\n      for (var value in this.rejects) {\n        rejectCount += 1;\n      }\n\n      // update 'select all' checkbox\n      filterItems[0].checked = rejectCount != filterItems.length - 1;\n      filterItems[0].incomplete = rejectCount != 0;\n\n      filterItemList.invalidate();\n\n    }).trigger('sortchange').trigger('filterchange');\n\n    return dialog;\n  };\n\n  var createFilterButton = function() : FilterButton {\n    return {\n      $el : util.createSVGElement('svg',\n          { style : { position : 'absolute' },\n            attrs : { width : '15', height : '15',\n            'class' : '${prefix}-filter-button ${prefix}-clickable-op' } }),\n      filtered : false,\n      sortOrder : null,\n      setFiltered : function(filtered : boolean) {\n        this.filtered = filtered;\n        this.update();\n      },\n      setSortOrder : function(sortOrder : string) {\n        this.sortOrder = sortOrder;\n        this.update();\n      },\n      update : function() {\n        // remove all children\n        while (this.$el.firstChild) {\n          this.$el.removeChild(this.$el.firstChild);\n        }\n        // outer rect\n        this.$el.appendChild(util.createSVGElement('rect', {\n          attrs : { 'class' : '${prefix}-filter-body',\n            x : '0', y : '0', width: '15', height : '15',\n            rx: '3', ry : '3' } }) );\n        // and others.\n        var fillClass = '${prefix}-filter-fill';\n        var strokeClass = '${prefix}-filter-stroke';\n        if (this.filtered) {\n          this.$el.appendChild(util.createSVGElement('path', {\n            attrs : { 'class' : fillClass,\n              d : 'M 5 4 L 8 7 L 8 12 L 11 12 L 11 7 L 14 4 Z' } }) );\n          if (this.sortOrder == null) {\n            this.$el.appendChild(util.createSVGElement('path', {\n              attrs : { 'class' : fillClass, d: 'M 0 8 L 3 12 L 6 8 Z' } }) );\n          }\n        } else if (this.sortOrder == null) {\n          this.$el.appendChild(util.createSVGElement('path', {\n            attrs : { 'class' : fillClass, d: 'M 1 4 L 7 11 L 13 4 Z' } }) );\n        } else {\n          this.$el.appendChild(util.createSVGElement('path', {\n            attrs : { 'class' : fillClass, d: 'M 4 5 L 9 11 L 14 5 Z' } }) );\n        }\n        if (this.sortOrder != null) {\n          this.$el.appendChild(util.createSVGElement('path', {\n            attrs : { 'class' : strokeClass, d: 'M 3 2 L 3 12'} } ) );\n          if (this.sortOrder == SortOrder.ASC) {\n            this.$el.appendChild(util.createSVGElement('path', {\n              attrs : { 'class' : strokeClass, d: 'M 1 5 L 3 2 L 5 5'} }) );\n          } else {\n            this.$el.appendChild(util.createSVGElement('path', {\n              attrs : { 'class' : strokeClass, d : 'M 1 9 L 3 12 L 5 9' } }) );\n          }\n        }\n        return this;\n      }\n    }.update();\n  };\n\n  var getFilterValues = function(tableModel : TemplateTableModel,\n      dataField : string, comparator : (a: any, b: any) => number) {\n    var exists : { [ value : string ] : boolean } = {};\n    var filterValues : any[] = [];\n    var items = tableModel.items;\n    for (var i = 0; i < items.length; i += 1) {\n      var value = items[i][dataField];\n      if (typeof value == 'undefined') {\n        continue;\n      }\n      if (!exists[value]) {\n        if (value !== '') {\n          filterValues.push(value);\n        }\n        exists[value] = true;\n      }\n    }\n    if (comparator) {\n      filterValues.sort(comparator);\n    } else {\n      filterValues.sort();\n    }\n    // blank is always last.\n    if (exists['']) {\n      filterValues.push('');\n    }\n    return filterValues;\n  };\n\n  export var createDefaultHeaderCellRendererFactory =\n      function(opts? : CellRendererFactoryOpts) :\n        TableCellRendererFactory {\n\n    opts = util.extend(createDefaultCellRendererFactoryOpts(), opts || {});\n\n    return function(td) : TableCellRenderer {\n\n      var labelRenderer = createMultiLineLabelRenderer(td.$el);\n\n      var tableModel : TemplateTableModel = <any>td.tableModel;\n      var filterButton : FilterButton = null;\n      var dialog : FilterDialog = null;\n\n      var showFilterDialog = function() : FilterDialog {\n        var filterContext = tableModel.filterContext;\n        var dataField = filterButton.cell.dataField;\n        var filterValues = getFilterValues(tableModel, dataField,\n            filterButton.cell.comparator);\n        var dialog = createFilterDialog(util.extend({\n          sortOrder : filterContext.sort &&\n            filterContext.sort.dataField == dataField?\n            filterContext.sort.sortOrder : null,\n          rejects : filterContext.filters[dataField] || {},\n          filterValues : filterValues\n        }, opts), filterButton.cell).on('applysort', function() {\n          (<any>filterContext)['.comparator'] = filterButton.cell.comparator;\n          filterContext.sort = this.sortOrder?\n              { dataField : dataField, sortOrder : this.sortOrder } :null;\n          tableModel.trigger('filterchange');\n        }).on('applyfilter', function() {\n          (<any>filterContext)['.comparator'] = filterButton.cell.comparator;\n          filterContext.filters[dataField] = this.rejects;\n          tableModel.trigger('filterchange');\n        });\n        var off = util.offset(td.$el);\n        dialog.$el.style.left = off.left + 'px',\n        dialog.$el.style.top = (off.top + td.$el.offsetHeight) + 'px';\n        dialog.show();\n        return dialog;\n      };\n\n      return {\n        render : function(cell) {\n\n          labelRenderer.setLabel(cell.value || '\\u00a0');\n\n          if (cell.dataField) {\n\n            if (!filterButton) {\n              filterButton = createFilterButton();\n              util.set(filterButton.$el, {\n                on : { mousedown : function(event) {\n                    event.preventDefault();\n                    if (dialog == null) {\n                      // wait for end edit then show dialog.\n                      util.callLater(function() {\n                        dialog = showFilterDialog();\n                        dialog.on('dispose', function() {\n                          dialog = null;\n                        });\n                      });\n                    } else {\n                      dialog.dispose();\n                    }\n                  }\n                }\n              });\n              td.$el.style.position = 'relative';\n              td.$el.appendChild(filterButton.$el);\n            }\n\n            filterButton.cell = cell;\n            var filterContext = tableModel.filterContext;\n            filterButton.setSortOrder(filterContext.sort &&\n                filterContext.sort.dataField == cell.dataField?\n                    filterContext.sort.sortOrder : null);\n            var rejects = filterContext.filters[cell.dataField] || {};\n            var filtered = false;\n            for (var value in rejects) { filtered = true; break; }\n            filterButton.setFiltered(filtered);\n          }\n          if (filterButton) {\n            filterButton.$el.style.display = cell.dataField? '' : 'none';\n          }\n        },\n        beginEdit : function(cell) {\n          return { focus : function() {}, endEdit : function() {} };\n        },\n        dispose : function() {\n        }\n      };\n    };\n  }\n\n}\n","/*!\n * comfortable\n *\n * Copyright (c) 2018 Kazuhiko Arase\n *\n * URL: https://github.com/kazuhikoarase/comfortable-js/\n *\n * Licensed under the MIT license:\n *  http://www.opensource.org/licenses/mit-license.php\n */\n\nnamespace comfortable {\n\n  'use strict';\n\n  var createFilterContext = function() : FilterContext {\n    return { sort : null, filters : {} };\n  };\n\n  var createDefaultOrderedColumnIndices = function(tableModel : TableModel) {\n    var orderedColumnIndices : number[] = [];\n    var columnCount = tableModel.getColumnCount();\n    for (var i = 0; i < columnCount; i += 1) {\n      orderedColumnIndices.push(i);\n    }\n    return orderedColumnIndices;\n  };\n\n  var showColumnEditDialog = function(table : TemplateTable) {\n\n    var messages = i18n.getMessages();\n    var tableModel = <TemplateTableModel>table.model;\n    var lockLeft : number = (<any>table).lockLeft;\n\n    var ColumnType = { LOCK_COLUMN : 'lockColumn', COLUMN : 'column' };\n    \n    interface ColumnItem {\n      type : string;\n      label : string;\n      hidden : boolean;\n      col? : number;\n      colSpan? : number;\n    }\n\n    var columns = function() {\n      var columns : ColumnItem[] = [];\n      var columnCount = tableModel.getColumnCount();\n      for (var col = 0; col <= columnCount;) {\n        if (col == lockLeft) {\n          columns.push({ type : ColumnType.LOCK_COLUMN,\n            label : messages.LOCK_COLUMN,\n            hidden : !table.enableLockColumn });\n        }\n        if (col < columnCount) {\n          var cell = tableModel.getCellAt(0, col);\n          var orderedCol = tableModel.getOrderedColumnIndexAt(col);\n          columns.push({ type : ColumnType.COLUMN,\n            label : tableModel.getValueAt(0, col),\n            hidden : !!tableModel.hiddenColumns[orderedCol],\n            col : orderedCol, colSpan : cell.colSpan });\n          col += cell.colSpan;\n        } else {\n          col += 1;\n        }\n      }\n      return columns;\n    }();\n\n    var columnItems = columns.map(function(column) {\n      return util.createElement('div', {\n          attrs : { 'class' : '${prefix}-listitem ${prefix}-clickable' +\n            (column.type == ColumnType.LOCK_COLUMN?\n                ' ${prefix}-column-edit-lock-column' : '') },\n          on : { mousedown : function(event) {\n            event.preventDefault();\n            columnItems.forEach(function(elm) {\n              util.$(elm).removeClass('${prefix}-clickable');\n            });\n            var mousemoveHandler = function(event : Event) {\n              if (!started && Math.abs(event.pageY - dragPoint.y) > 4) {\n                started = true;\n              }\n              if (!started) {\n                return;\n              }\n              var listitem = util.closest(event.target,\n                  { className : '${prefix}-listitem', root : dialog.$el });\n              if (!listitem) {\n                return;\n              }\n              indexTo = columnItems.indexOf(listitem);\n              var off = util.offset(listitem);\n              var top = listitem.offsetTop - 2 - (<HTMLElement>listitem.parentNode).scrollTop;\n              if (off.top + listitem.offsetHeight / 2 < event.pageY) {\n                indexTo += 1;\n                top += listitem.offsetHeight;\n              }\n              bar.style.display = '';\n              bar.style.top = top + 'px';\n            };\n            var mouseupHandler = function(event : Event) {\n              util.$(document).off('mousemove', mousemoveHandler).\n                off('mouseup', mouseupHandler);\n              columnItems.forEach(function(elm) {\n                util.$(elm).addClass('${prefix}-clickable');\n              });\n              lastTarget = target;\n              dialog.$el.removeChild(bar);\n              if (indexTo != -1 && indexFrom != indexTo) {\n                var parent = target.parentNode;\n                var ref = columnItems[indexTo];\n                columns = util.moveSublist(columns, indexFrom, 1, indexTo);\n                columnItems = util.moveSublist(columnItems, indexFrom, 1, indexTo);\n                parent.removeChild(target);\n                if (ref) {\n                  parent.insertBefore(target, ref);\n                } else {\n                  parent.appendChild(target);\n                }\n              }\n            };\n            util.$(document).on('mousemove', mousemoveHandler).\n              on('mouseup', mouseupHandler);\n            var target = event.currentTarget;\n            var bar = util.createElement('div', {\n              attrs : { 'class' : '${prefix}-column-edit-bar' },\n              style : { position : 'absolute', left : '0px',\n                display : 'none', width : target.offsetWidth + 'px' }\n            });\n            var indexFrom = columnItems.indexOf(target);\n            var indexTo = -1;\n            var started = false;\n            var dragPoint = { x : event.pageX, y : event.pageY };\n            dialog.$el.appendChild(bar);\n            if (lastTarget != null) {\n              util.$(lastTarget).removeClass('${prefix}-selected');\n            }\n            util.$(target).addClass('${prefix}-selected');\n          }}\n        },[\n        util.createElement('input', {\n          attrs : { type : 'checkbox' },\n          props : { checked : !column.hidden },\n          style : { verticalAlign : 'middle' },\n          on:{ click : function(event) {\n            var target = event.currentTarget;\n            var index = util.indexOf(target.parentNode);\n            columns[index].hidden = !target.checked;\n          }}\n        }),\n        util.createElement('span', {\n          style : { verticalAlign : 'middle' },\n          props : { textContent : column.label }\n        }) ]);\n    });\n\n    var lastTarget : HTMLElement = null;\n\n    var dialog =  util.extend(ui.createDialog([\n      // columns\n      util.createElement('div',\n        { style : { overflow : 'auto',  height : '200px' } }, columnItems),\n      // buttons\n      util.createElement('div', { style : { float : 'right'} }, [\n        ui.createButton(messages.RESET, function() {\n          dialog.dispose();\n          tableModel.orderedColumnIndices = null;\n          tableModel.hiddenColumns = {};\n          tableModel.trigger('beforecellsizechange');\n          table.setLockLeft(table.defaultLockColumn);\n          table.enableLockColumn = true;\n          table.invalidate();\n        }),\n        ui.createButton(messages.APPLY, function() {\n          dialog.dispose();\n          var orderedColumnIndices : number[] = [];\n          var hiddenColumns : { [ orderedCol : number ] : boolean } = {};\n          var lockColumn = 0;\n          var enableLockColumn = true;\n          columns.forEach(function(column, col) {\n            if (column.type == 'column') {\n              for (var i = 0; i < column.colSpan; i += 1) {\n                orderedColumnIndices.push(i + column.col);\n              }\n              if (column.hidden) {\n                hiddenColumns[tableModel.getOrderedColumnIndexAt(column.col)] = true;\n              }\n            } else if (column.type == ColumnType.LOCK_COLUMN) {\n              lockColumn = col < columns.length - 1? col : 0;\n              enableLockColumn = !column.hidden;\n            }\n          });\n          tableModel.orderedColumnIndices = orderedColumnIndices;\n          tableModel.hiddenColumns = hiddenColumns;\n          tableModel.trigger('beforecellsizechange');\n          table.setLockLeft(lockColumn);\n          table.enableLockColumn = enableLockColumn;\n          table.invalidate();\n        }),\n        ui.createButton(messages.CANCEL, function() {\n          dialog.dispose();\n        })\n      ])\n    ])).on('beforeshow', function() {\n      var left = document.documentElement.scrollLeft +\n        ( (window.innerWidth - this.$el.offsetWidth) / 2 );\n      var top = document.documentElement.scrollTop +\n        ( (window.innerHeight - this.$el.offsetHeight) / 2 );\n      this.$el.style.left = left + 'px';\n      this.$el.style.top = top + 'px';\n    });\n    dialog.show();\n  };\n\n  var enableHover = function(table : Table) {\n    var tableModel = <TemplateTableModel>table.model;\n    var setHoverRowImpl = function(row : number, hover : boolean) {\n      table.forEachCells(function(td) {\n        var itemIndex = tableModel.getItemIndexAt(td.row, td.col);\n        if (itemIndex.row != row) {\n          // skip\n          return;\n        }\n        util.$(td.$el).addClass('${prefix}-item-hover', !hover);\n        //var cs = null;\n        for (var i = 0; i < td.$el.childNodes.length; i += 1) {\n          var child = td.$el.childNodes[i];\n          /*\n          if (child.tagName == 'INPUT' || child.tagName == 'SELECT') {\n            if (cs == null) {\n              cs = window.getComputedStyle(td.$el, null);\n            }\n            child.style.backgroundColor = cs.backgroundColor;\n          }\n          */\n        }\n      });\n    };\n\n    var setHoverRow = function(hoverRow : number) {\n      if (tableModel.hoverRow != hoverRow) {\n        if (tableModel.hoverRow != -1) {\n          setHoverRowImpl(tableModel.hoverRow, false);\n        }\n        tableModel.hoverRow = hoverRow;\n        if (tableModel.hoverRow != -1) {\n          setHoverRowImpl(tableModel.hoverRow, true);\n        }\n      }\n    };\n\n    return table.on('mouseover', function(event, detail) {\n        setHoverRow(detail.itemIndex.row);\n      }).\n      on('mouseout', function(event, detail) {\n        setHoverRow(-1);\n      });\n  };\n\n  var enableRowSelect = function(table : Table) {\n    return table.on('click', function(event, detail) {\n      if (detail.itemIndex.row != -1) {\n        var lastSelectedRows : { [row : string] : boolean } = {};\n        for (var k in this.model.selectedRows) {\n          lastSelectedRows[k] = true;\n        }\n        if (this.model.multipleRowsSelectable && detail.originalEvent.ctrlKey) {\n          // ctrl + click : toggle selection\n          if (!this.model.selectedRows[detail.itemIndex.row]) {\n            this.model.selectedRows[detail.itemIndex.row] = true;\n          } else {\n            delete this.model.selectedRows[detail.itemIndex.row];\n          }\n        } else {\n          this.model.selectedRows = {};\n          this.model.selectedRows[detail.itemIndex.row] = true;\n        }\n\n        // check changed.\n        var changed = false;\n        for (var k in this.model.selectedRows) {\n          if (lastSelectedRows[k]) {\n            delete lastSelectedRows[k];\n          } else {\n            changed = true;\n            break;\n          }\n        }\n        for (var k in lastSelectedRows) {\n          changed = true;\n          break;\n        }\n\n        if (changed) {\n          this.invalidate();\n          this.model.trigger('rowselectionchange',\n              { selectedRows : this.model.selectedRows });\n        }\n      }\n    });\n  };\n\n  var setupDefaults = function(template : TableTemplate) {\n\n    // body => head,foot\n    var inheritFromBody = [ 'dataType',\n      'options', 'labelField', 'valueField' ];\n    var bodyDataCells : any = {};\n    template.tbody.forEach(function(tr) {\n      tr.forEach(function(cell) {\n        if (typeof cell.dataField == 'string') {\n          bodyDataCells[cell.dataField] = cell;\n        }\n      });\n    });\n    template.thead.forEach(function(tr) {\n      tr.forEach(function(cell) {\n        if (typeof cell.dataField == 'string') {\n          var bodyDataCell = bodyDataCells[cell.dataField];\n          if (bodyDataCell) {\n            inheritFromBody.forEach(function(prop) {\n              if (bodyDataCell[prop] &&\n                  typeof (<any>cell)[prop] == 'undefined') {\n                (<any>cell)[prop] = bodyDataCell[prop];\n              }\n            });\n          }\n        }\n      });\n    });\n    template.tfoot.forEach(function(tr) {\n      tr.forEach(function(cell) {\n        if (typeof cell.dataField == 'string') {\n          var bodyDataCell = bodyDataCells[cell.dataField];\n          if (bodyDataCell) {\n            inheritFromBody.forEach(function(prop) {\n              if (bodyDataCell[prop] &&\n                  typeof (<any>cell)[prop] == 'undefined') {\n                (<any>cell)[prop] = bodyDataCell[prop];\n              }\n            });\n          }\n        }\n      });\n    });\n\n    template.thead.forEach(function(row) {\n      row.forEach(function(cell) {\n        if (!cell.factory && cell.dataType) {\n          cell.factory = createDefaultHeaderCellRendererFactory(cell);\n        }\n      });\n    });\n    template.tbody.forEach(function(row) {\n      row.forEach(function(cell) {\n        if (!cell.factory && cell.dataType) {\n          cell.factory = createDefaultCellRendererFactory(cell);\n        }\n      });\n    });\n    template.tfoot.forEach(function(row) {\n      row.forEach(function(cell) {\n        if (!cell.factory && cell.dataType) {\n          cell.factory = createDefaultCellRendererFactory(cell);\n        }\n      });\n    });\n  };\n\n  export var fromTemplate =\n      function(template : TableTemplate) : TemplateTable {\n\n    if (template.thead && !template.tbody) {\n      // set default tbody if not exists.\n      var cloneIfExists = function(src : any, props : string[]) {\n        var dst : any = {};\n        props.forEach(function(prop) {\n          !src[prop] || (dst[prop] = src[prop]);\n        });\n        return dst;\n      };\n      var props = [ 'colSpan', 'rowSpan', 'dataField' ];\n      template.tbody = template.thead.map(function(tr) {\n        return tr.map(function(headCell) {\n          return cloneIfExists(headCell, props);\n        });\n      });\n    }\n\n    template.thead = template.thead || [];\n    template.tbody = template.tbody || [];\n    template.tfoot = template.tfoot || [];\n\n    // setup defaults.\n    setupDefaults(template);\n\n    var columnCount = 0;\n    var cellWidth : { [k : number] : number } = {};\n    var cellHeight : { [k : number] : number } = {};\n    var columnDraggable : { [k : number] : boolean } = {};\n    var columnResizable : { [k : number] : boolean } = {};\n\n    var styles = function() {\n      var spaned : { [ id : string ] : boolean } = {};\n      var setSpaned = function(row : number, col : number, cell : TableCell) {\n        for (var r = 0; r < cell.rowSpan; r += 1) {\n          for (var c = 0; c < cell.colSpan; c += 1) {\n            spaned[util.getCellId(row + r, col + c)] = true;\n          }\n        }\n      };\n      return template.thead\n          .concat(template.tbody)\n          .concat(template.tfoot).map(function(tr, row) {\n        var style : { [ col : number ] : TableTemplateCellStyle } = {};\n        var col = 0;\n        var c = 0;\n        while (c < tr.length) {\n          var id = util.getCellId(row, col);\n          if (spaned[id]) {\n            col += 1;\n            continue;\n          }\n          var td = tr[c];\n          var cell = util.extend({ rowSpan : 1, colSpan : 1 }, td);\n          setSpaned(row, col, cell);\n          if (typeof cell.width == 'number') {\n            cellWidth[col] = cell.width;\n          }\n          if (typeof cell.height == 'number') {\n            cellHeight[row] = cell.height;\n          }\n          if (typeof cell.columnDraggable == 'boolean') {\n            columnDraggable[col] = cell.columnDraggable;\n          }\n          if (typeof cell.columnResizable == 'boolean') {\n            columnResizable[col] = cell.columnResizable;\n          }\n          style[col] = td;\n          col += cell.colSpan;\n          c += 1;\n        }\n        columnCount = Math.max(columnCount, col);\n        return style;\n      });\n    }();\n\n    var getCellStyleAt = function(\n        model : TemplateTableModel, row : number, col : number) {\n      if (row < headLength) {\n        return styles[row][col] || {};\n      } else if (row >= model.getRowCount() - footLength) {\n        return styles[row - bodyLength * (model.getItemCount() - 1)][col] || {};\n      } else {\n        return styles[headLength + (row - headLength) % bodyLength][col] || {};\n      }\n    };\n\n    var headLength = template.thead.length;\n    var bodyLength = template.tbody.length;\n    var footLength = template.tfoot.length;\n\n    class TemplateTableImpl extends TableImpl implements TemplateTable {\n      public lockLeft = template.lockColumn || 0;\n      public lockRight = 0;\n      public enableLockColumn = true;\n      // keep default value for restore.\n      public defaultLockColumn = this.lockLeft;\n\n      public setLockLeft(lockLeft : number) {\n        this.lockLeft = lockLeft;\n      }\n      public getLockLeft() {\n        return !this.enableLockColumn? 0 : this.lockLeft;\n      }\n      public getLockTop() { return headLength; }\n\n      public setLockRight(lockRight : number) {\n        this.lockRight = lockRight;\n      }\n      public getLockRight() {\n        return this.lockRight;\n      }\n      public getLockBottom() { return footLength; }\n\n      public getContextMenuItems() {\n        var messages = i18n.getMessages();\n        var tableModel = table.model as TemplateTableModel;\n        return [\n          {\n            label : messages.RESET_FILTER,\n            action : function() {\n              tableModel.resetFilter();\n            }\n          },\n          {\n            label : messages.EDIT_COLUMNS,\n            action : function() {\n              showColumnEditDialog(table);\n            }\n          }\n        ];\n      }\n    }\n\n    class TemplateTableModelImpl\n    extends DefaultTableModel implements TemplateTableModel {\n      // user defines\n      public defaultHeaderCellRendererFactory =\n        createDefaultHeaderCellRendererFactory();\n      public cellWidth = cellWidth;\n      public cellHeight = cellHeight;\n      public columnDraggable = columnDraggable;\n      public columnResizable = columnResizable;\n      public orderedColumnIndices : number[] = null;\n      public filterContext = createFilterContext();\n      public hiddenColumns : { [ orderedCol : number ] : boolean } = {};\n      public items : any[] = [];\n      public filteredItems : any[] = null;\n      public hoverRow = -1;\n      public multipleRowsSelectable = false;\n      public selectedRows : { [ row : number ] : boolean } = {};\n      public resetFilter() {\n        this.filterContext = createFilterContext();\n        this.filteredItems = null;\n        table.invalidate();\n      }\n      public getItemCount() {\n        return (this.filteredItems || this.items).length;\n      }\n      public getItemAt(row : number) {\n        return (this.filteredItems || this.items)[row];\n      }\n      public getOrderedColumnIndexAt(col : number) {\n        if (this.orderedColumnIndices == null) {\n          this.orderedColumnIndices = createDefaultOrderedColumnIndices(this);\n        }\n        return this.orderedColumnIndices[col];\n      }\n      public getItemIndexAt(row : number, col : number) : ItemIndex {\n        if (row < headLength) {\n          return { row : -1, col : -1 };\n        } else if (row >= this.getRowCount() - footLength) {\n          return { row : -1, col : -1 };\n        } else {\n          var orderedCol = this.getOrderedColumnIndexAt(col);\n          var style = getCellStyleAt(this, row, orderedCol);\n          row -= headLength;\n          return {\n            row : ~~(row / bodyLength),\n            col : style.dataField ||\n              ( (row % bodyLength) * this.getColumnCount() + orderedCol)\n          };\n        }\n      }\n      public setValueAt(row : number, col : number, value : any) {\n        if (row < headLength) {\n        } else if (row >= this.getRowCount() - footLength) {\n        } else {\n          var itemIndex = this.getItemIndexAt(row, col);\n          var item = this.getItemAt(itemIndex.row);\n          if (item) {\n            item[itemIndex.col] = value;\n          }\n        }\n      }\n      // overrides\n      public getRowCount() { return headLength +\n        bodyLength * this.getItemCount() + footLength; }\n      public getColumnCount() { return columnCount; }\n      public getLineRowCountAt(row : number) {\n        return row < headLength? headLength :\n          row >= this.getRowCount() - footLength? footLength :\n          bodyLength; }\n      public getLineRowAt(row : number) {\n        return row < headLength? row :\n          row >= this.getRowCount() - footLength?\n              row - (this.getRowCount() - footLength) :\n          (row - headLength) % bodyLength; }\n      public getCellWidthAt(col : number) {\n        var orderedCol = this.getOrderedColumnIndexAt(col);\n        if (this.hiddenColumns[orderedCol]) {\n          return 0;\n        }\n        var v = this.cellWidth[orderedCol];\n        return typeof v == 'number'? v : this.defaultCellWidth;\n      }\n      public getCellHeightAt(row : number) {\n        var v = this.cellHeight[row];\n        return typeof v == 'number'? v : this.defaultCellHeight;\n      }\n      public isColumnDraggableAt(col : number) {\n        var orderedCol = this.getOrderedColumnIndexAt(col);\n        var v = this.columnDraggable[orderedCol];\n        return typeof v == 'boolean'? v : true;\n      }\n      public isColumnResizableAt(col : number) {\n        var orderedCol = this.getOrderedColumnIndexAt(col);\n        var v = this.columnResizable[orderedCol];\n        return typeof v == 'boolean'? v : true;\n      }\n      public getCellRendererFactoryAt(row : number, col : number) :\n          TableCellRendererFactory {\n        var orderedCol = this.getOrderedColumnIndexAt(col);\n        return getCellStyleAt(this, row, orderedCol).factory ||\n          (row < headLength?\n            this.defaultHeaderCellRendererFactory :\n            this.defaultCellRendererFactory);\n      }\n      public getCellStyleAt(row : number, col : number) : TableCellStyle {\n        var orderedCol = this.getOrderedColumnIndexAt(col);\n        var style = util.extend({}, getCellStyleAt(this, row, orderedCol) );\n        style.className = style.className || '';\n        if (row < headLength) {\n          style.className += ' ${prefix}-header';\n          style.editable = false;\n        } else if (row >= this.getRowCount() - footLength) {\n          style.className += ' ${prefix}-footer';\n          style.editable = false;\n        } else {\n          var itemIndex = this.getItemIndexAt(row, col);\n          row -= headLength;\n          style.className += ' ${prefix}-' +\n            (itemIndex.row % 2 == 0? 'even' : 'odd');\n          if (this.selectedRows[itemIndex.row]) {\n            style.className += ' ${prefix}-item-selected';\n          }\n        }\n        if (style.editable === false) {\n          style.className += ' ${prefix}-readonly';\n        }\n        return style;\n      }\n      public getValueAt(row : number, col : number) : any {\n        var orderedCol = this.getOrderedColumnIndexAt(col);\n        if (row < headLength || row >= this.getRowCount() - footLength) {\n          var label : any = getCellStyleAt(this, row, orderedCol).label || '';\n          return typeof label == 'function'? label(this) : label;\n        } else {\n          var itemIndex = this.getItemIndexAt(row, col);\n          var value = this.getItemAt(itemIndex.row)[itemIndex.col];\n          return typeof value != 'undefined'? value : '';\n        }\n      }\n    }\n\n    var table = new TemplateTableImpl(\n        new TemplateTableModelImpl() );\n\n    table.on('mousedown', function(event : Event, detail : any) {\n      if (detail.row < this.getLockTop() ) {\n        // on header.\n        this.editor.endEdit();\n        this.invalidate();\n      }\n    }).on('contextmenu', function(event : Event, detail : any) {\n\n      if (!(detail.row < table.getLockTop() ) ) {\n        return;\n      }\n\n      var menuItems = this.getContextMenuItems();\n      if (!menuItems || menuItems.length == 0) {\n        return;\n      }\n\n      detail.originalEvent.preventDefault();\n      util.callLater(function() {\n        ui.showMenu(\n            detail.originalEvent.pageX,\n            detail.originalEvent.pageY,\n            menuItems);\n      });\n    });\n\n    table.model.on('valuechange', function(event : Event, detail : any) {\n      this.setValueAt(detail.row, detail.col, detail.newValue);\n    }).on('cellsizechange', function(event : Event, detail : any) {\n      if (typeof detail.col == 'number') {\n        var orderedCol = this.getOrderedColumnIndexAt(detail.col);\n        this.cellWidth[orderedCol] = detail.cellWidth;\n      }\n    }).on('columndragged', function(event : Event, detail : any) {\n      this.orderedColumnIndices = util.moveSublist(\n          this.orderedColumnIndices, detail.colFrom, detail.colSpan, detail.colTo);\n      if (detail.colFrom < table.lockLeft && table.lockLeft <= detail.colTo) {\n        table.lockLeft -= detail.colSpan;\n      } else if (detail.colTo < table.lockLeft && table.lockLeft <= detail.colFrom) {\n        table.lockLeft += detail.colSpan;\n      }\n    }).on('filterchange', function() {\n\n      // apply filter\n\n      var filters = this.filterContext.filters;\n      var filteredItems : any[] = this.items.filter(function(item : any) {\n        var filtered = false;\n        for (var dataField in filters) {\n          if (filters[dataField][item[dataField]]) {\n            filtered = true;\n            break;\n          }\n        }\n        return !filtered;\n      } );\n\n      var sort = this.filterContext.sort;\n      if (sort) {\n        var order = sort.sortOrder == SortOrder.ASC? 1 : -1;\n        var dataField = sort.dataField;\n        var indexField = '.index';\n        var sortKeyField = '.sortKey';\n        var comparator = this.filterContext['.comparator'];\n        filteredItems.forEach(function(item, i) {\n          item[indexField] = i;\n          item[sortKeyField] = (item[dataField] === null ||\n              typeof item[dataField] == 'undefined')? '' : item[dataField];\n        });\n        if (comparator) {\n          // sort by custom comparator.\n          delete this.filterContext['.comparator'];\n          filteredItems.sort(function(item1, item2) {\n            var result = comparator(item1[sortKeyField], item2[sortKeyField]);\n            if (result != 0) {\n              return order * result;\n            }\n            return order * (item1[indexField] < item2[indexField]? -1 : 1);\n          });\n        } else {\n          filteredItems.sort(function(item1, item2) {\n            if (item1[sortKeyField] != item2[sortKeyField]) {\n              return order * (item1[sortKeyField] < item2[sortKeyField]? -1 : 1);\n            }\n            return order * (item1[indexField] < item2[indexField]? -1 : 1);\n          });\n        }\n        filteredItems.forEach(function(item) {\n          delete item[indexField];\n          delete item[sortKeyField];\n        });\n      }\n      this.filteredItems = filteredItems;\n      table.invalidate();\n    });\n\n    // append itemIndex to events.\n    [ 'valuechange' ].\n    forEach(function(type) {\n      table.model.on(type, function(event : Event, detail : any) {\n        detail.itemIndex = this.getItemIndexAt(detail.row, detail.col);\n      });\n    });\n    tableEventTypes.forEach(function(type) {\n      table.on(type, function(event : Event, detail : any) {\n        detail.itemIndex = this.model.getItemIndexAt(detail.row, detail.col);\n      });\n    });\n\n    enableHover(table);\n    enableRowSelect(table);\n\n    return table;\n  }\n\n}\n","/*!\n * comfortable\n *\n * Copyright (c) 2018 Kazuhiko Arase\n *\n * URL: https://github.com/kazuhikoarase/comfortable-js/\n *\n * Licensed under the MIT license:\n *  http://www.opensource.org/licenses/mit-license.php\n */\n\nnamespace comfortable {\n\n  'use strict';\n\n  var table = {\n    template: '<div class=\"comfortable\"></div>',\n    props : {\n      template : { 'default' : function() {\n          return {\n            thead : [[ { label : 'col1' },{ label : 'col2' },{ label : 'col3' }]]\n          };\n        } },\n    },\n    methods: {\n      invalidate : function() {\n        this.$options.table.invalidate();\n        return this;\n      },\n      setItems : function(items : any[]) {\n        this.$options.table.model.items = items;\n        this.invalidate();\n        return this;\n      },\n      getItems : function() {\n        return this.$options.table.model.items;\n      },\n      getModel : function() {\n        return this.$options.table.model;\n      },\n      getLockTop : function() {\n        return this.$options.table.getLockTop();\n      },\n      getLockLeft : function() {\n        return this.$options.table.getLockLeft();\n      }\n    },\n    mounted : function() {\n\n      var table = fromTemplate(this.template);\n\n      // set default values.\n      table.$el.style.width = '100%';\n      table.$el.style.height = '100%';\n      this.$el.style.width = this.$el.style.width || '400px';\n      this.$el.style.height = this.$el.style.height || '200px';\n\n      // emit events.\n      var emitEventHandler = function(event : Event, detail : any) {\n        this.$emit(event.type, event, detail);\n      }.bind(this);\n      [\n       'mousedown', 'mouseover', 'mouseout',\n       'click', 'dblclick', 'contextmenu' ].forEach(function(type) {\n         table.on(type, emitEventHandler);\n       });\n      table.model.on('valuechange', emitEventHandler);\n\n      // as a non-reactive property, set to $options.\n      this.$options.table = table;\n      this.$el.appendChild(table.$el);\n\n      var items : string = this.items;\n      this.setItems(items? JSON.parse(items) : []);\n\n      // observe the size of table.\n      util.extend(this.$options, {\n        observeInterval : 20, // ms(50fps)\n        alive : true, lastSize : { width : 0, height : 0 }\n      });\n      var observeSize = function() {\n        var size = {\n          width : this.$el.offsetWidth,\n          height : this.$el.offsetHeight\n        };\n        if (size.width != this.$options.lastSize.width ||\n            size.height != this.$options.lastSize.height) {\n          this.$options.lastSize = size;\n          this.invalidate();\n        }\n        if (this.$options.alive) {\n          window.setTimeout(observeSize, this.$options.observeInterval);\n        }\n      }.bind(this);\n      window.setTimeout(observeSize, this.$options.observeInterval);\n    },\n    beforeDestroy : function() {\n      // stop observing\n      this.$options.alive = false;\n    }\n  }\n\n  export var vueComponents = {\n    table : table\n  }\n\n}\n"]}